# Swiftå·¥ç¨‹é¡¹ç›®æ¡†æ¶é…ç½®æ–¹æ¡ˆ@Jobs

[toc]

## ä¸€ã€<font id=ä¸€äº›åŸºæœ¬çš„åŸåˆ™>ä¸€äº›åŸºæœ¬çš„åŸåˆ™</font>

### 1ã€ä¸åˆ°ä¸‡ä¸å¾—å·²ï¼Œä¸è¦ç”¨OCåº“

* æ—¢ç„¶æ˜¯[**Swift**](https://www.swift.org/)å·¥ç¨‹ï¼Œé‚£ä¹ˆå°±å°½å¯èƒ½çš„ä¸è¦è°ƒç”¨OCåº“ï¼Œå¦åˆ™æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸ç”¨OCå†™å·¥ç¨‹é¡¹ç›®ï¼Ÿ**ä¸è¦æ—¢å½“åˆç«‹**ã€‚ç‰¹åˆ«æ˜¯åœ¨æœ‰ä¼˜ç§€å¹³æ›¿çš„æƒ…å†µä¸‹ã€‚ç›¸ä¿¡äº’è”ç½‘æ˜¯åœ¨ä¸æ–­å‘å‰å‘å±•çš„ï¼Œæ–°å‡ºçš„è½®å­å¯èƒ½ç¨³å®šæ€§æ¥è®²å¯èƒ½ä¸å¦‚è€æ—§çš„ï¼ˆç‰¹åˆ«æ˜¯é‚£ç§å¾ˆå¤šå¹´ä¸æ›´æ–°çš„åº“ï¼Œä¸åˆ°ä¸‡ä¸å¾—å·²ï¼Œæ…ç”¨ï¼ï¼‰ï¼Œä½†æ˜¯ä»è°ƒç”¨å’Œå†…å­˜åŒ…æ‹¬å‘å‰å…¼å®¹ç­‰æ–¹é¢ï¼Œä¸€å®šæ˜¯ä¼˜äºè€æ—§æ¡†æ¶çš„ã€‚å¦åˆ™ä¸ºä»€ä¹ˆè¦å¼€å‘æ–°ç‰ˆæœ¬ï¼Ÿå³ä¾¿æ˜¯Appleå…¬å¸ï¼Œä¹Ÿæ˜¯çœ‹åˆ°äº†OCçš„ä¸€äº›ä¸è¶³ï¼Œæ‰€ä»¥æ‰ä¸‹äº†å¾ˆå¤§çš„å†³å¿ƒä»OCè¿ç§»åˆ°[**Swift**](https://www.swift.org/)ï¼Œç›¸ä¿¡è¿ç§»æ‰€é€ æˆçš„å„æ–¹æŸè€—å’Œå¸¦æ¥çš„ä¼˜åŠ¿ï¼Œä¹Ÿæ˜¯ç»è¿‡å„æ–¹å¤šè½®è¯„ä¼°åæ‰åšçš„å–èˆï¼
* OCåº“éœ€è¦å¯¼å…¥å¤´æ–‡ä»¶ï¼Œè€Œä¸”å¤´æ–‡ä»¶çš„å¯¼å…¥åœ¨ç¼–è¯‘é˜¶æ®µåŒæ ·å­˜åœ¨å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼ˆç¼–è¯‘çš„æ—¶å€™ï¼Œä¸€å®šæ˜¯æŒ‰ç…§åŠ è½½çš„é¡ºåºï¼Œè‡ªä¸Šè€Œä¸‹çš„ç¼–è¯‘ï¼‰ï¼Œé‚£ä¹ˆåœ¨æŸäº›æç«¯çš„æƒ…å†µä¸‹ï¼Œå¼•å…¥çš„ä½ç½®ä¸å¯¹ï¼Œå°±ä¼šé€ æˆç¼–è¯‘ä¸é€šè¿‡ï¼ˆäº²æµ‹ï¼‰ã€‚è€Œ[**Swift**](https://www.swift.org/)åœ¨å·¥ç¨‹å†…éƒ¨ä¸éœ€è¦å¯¼å…¥æ–‡ä»¶ï¼Œé™¤éåœ¨ä¸åŒå·¥ç¨‹ï¼ˆè·¨åŸŸï¼‰ï¼Œæ¯”å¦‚åˆ©ç”¨[**CocoaPods**](https://cocoapods.org/)ç®¡ç†çš„ç¬¬ä¸‰æ–¹æ‰éœ€è¦è¿›è¡Œå¯¼å…¥ã€‚æ‰€ä»¥ï¼Œæ—¢ç„¶æ˜¯ç³»ç»Ÿåšäº†ä¼˜åŒ–çš„ï¼Œæˆ‘ä»¬å°±è¦é¡ºåŠ¿è€Œä¸ºã€‚
* å¯¼å…¥åº“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®ƒä¼šå‘åå…¼å®¹ï¼Œå¯¼å…¥ä¸€äº›è€æ—§çš„`*.framework`åº“ï¼Œé€ æˆæ‰“åŒ…ä½“ç§¯è¿‡å¤§çš„éšæ‚£ï¼ˆå¹¶ä¸èƒ½æ¯æ¬¡éƒ½ç²¾ç¡®å¤ç°ï¼Œè¿™é‡Œåªæ˜¯è®²é£é™©ä¸éšæ‚£ï¼‰ã€‚è¿™é‡Œçš„ä¸€ä¸ªä¾‹å­å°±æ˜¯[**è¿‡æœŸçš„æ¨¡æ‹Ÿå™¨é…ä»¶**](https://github.com/295060456/Xcode_Sys_lib)ã€‚è€æ—§çš„Apiåªè¦ä½ è°ƒç”¨äº†å°±ä¸€å®šä¼šæŒ‡å‘è€æ—§çš„`*.framework`ï¼Œ**ä¼šå½±å“æ‰“åŒ…å¤§å°ï¼Œä½†æ˜¯ä¸ä¸€å®šå½±å“è¿è¡Œæ—¶çš„å†…å­˜æƒ…å†µ**
* å¯¹äºä¸€äº›è€æ—§åº“ï¼ˆè¶…è¿‡5å¹´ä¸ç»´æŠ¤çš„åº“ï¼‰å¦‚æœå®åœ¨è¦ç”¨ï¼Œå°±éœ€è¦æ‰‹åŠ¨é›†æˆè‡ªé¡¹ç›®ï¼Œè€Œä¸æ˜¯[**CocoaPods**](https://cocoapods.org/)ç®¡ç†

### 2ã€ç”¨å¼€æºæ’­æ”¾å™¨

* å¸‚é¢ä¸Šï¼Œæœ‰å¼€æºçš„éŸ³è§†é¢‘æ’­æ”¾å™¨
* å¼ºçƒˆå»ºè®®ä¸è¦ç”¨è…¾è®¯ç­‰ä¸­å›½å¤§é™†å¤§å‚å‡ºå“çš„æ’­æ”¾å™¨
  * é­”æ”¹åŒæ ·éœ€è¦å­¦ä¹ æˆæœ¬
  * å¯¹æ ¸å¿ƒçš„éƒ¨åˆ†åšäº†ä¸åŒç¨‹åº¦çš„å°è£…
  * å†…å®¹è¿‡æ»¤ï¼ˆå¯èƒ½ä»Šå¤©æœ‰ç§å£°éŸ³æ˜¯è¯´æµ·å¤–ç‰ˆä¸ç®¡ï¼Œä½†æ˜¯å¦‚æœæ”¶ç´§ï¼Œæ˜¯ä¸æ˜¯æˆ‘ä»¬å…¨ä¸è¦æ¨ç¿»é‡æ¥ï¼Ÿï¼‰
* æ’­æ”¾å™¨ç”¨å¤§å‚SDKçš„æ”¯æŒæ–¹è§‚ç‚¹ï¼šèƒ½æœ€å°æˆæœ¬æ¥å…¥
* åšæŒè‡ªç ”æ’­æ”¾å™¨çš„è§‚ç‚¹ï¼š
  * æ’­æ”¾å™¨çš„ç›®çš„ï¼šå¯¹ç‰¹å®šæ ¼å¼é‡Œé¢è•´å«çš„ä¿¡æ¯ï¼Œè¿›è¡Œç¼–è§£ç ã€‚æ’­æ”¾çš„ç‰¹æ•ˆï¼Œæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼ˆæˆ–è®¸æ˜¯`*.json`æ ¼å¼ï¼Œäº¦æˆ–è®¸æ˜¯ç‰¹æœ‰æ ¼å¼ï¼‰
  * èƒ½å®Œå…¨ä»åº•å±‚å¼€å§‹ä¿®æ”¹ï¼Œæ–¹ä¾¿æœªæ¥å¯¹è§†é¢‘æµè¿›è¡Œ**åŠ /è§£å¯†** ï¼ˆåçˆ¬ï¼Œåç¼–è¯‘ï¼‰
  * å¤§å‚æ’­æ”¾å™¨ï¼Œå¯èƒ½ä¹Ÿä¸æ–¹ä¾¿é­”æ”¹ï¼ˆå¯èƒ½å…³é”®éƒ¨åˆ†æ—©å·²å°è£…æˆ`*.framework`æˆ–è€…`*.a`ï¼‰
  * å¦‚æœå¤§å‚æ’­æ”¾å™¨æ”¿ç­–æœ‰æ‰€æ”¹å˜ï¼Œè¿›è¡Œä¸šåŠ¡æ”¶ç´§ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦è¾ƒå¤§å¼€é”€å»åº”å¯¹è¿™ç§å˜åŒ–ï¼ˆiOS/Android2ç«¯ï¼‰å¦‚æœå¤šä¸ªAppï¼Œæ¯ä¸ªAppå†…éƒ¨æˆ‘ä»¬éƒ½éœ€è¦è¿›è¡Œæ›¿æ¢

## äºŒã€æˆ‘å¯¹iOSå¼€å‘çš„è®¤çŸ¥

* æ–¹å‘éš¶å±äºå¤§å‰ç«¯
* å‰ç«¯ç›¸å¯¹äºåæ®µçš„ç‰¹ç‚¹
  * æ•°æ®è½»é‡çº§ï¼Œä¸€èˆ¬ä¸è´Ÿè´£å­˜å‚¨ï¼Œæˆ–è€…æ˜¯åªå­˜å‚¨è½»é‡çº§çš„æ•°æ®ã€‚é™¤éé‚£ç§å›½æ°‘çº§Appï¼ˆä½†ä»–ä»¬éƒ½æœ‰æ¶æ„ç»„ï¼Œæ¡†æ¶å†…éƒ¨ç»´æŠ¤ä½¿ç”¨ï¼Œæå°‘å…¬å¼€ï¼‰
  * åç«¯çš„è¯­è¨€å¯ä»¥ä¸‡å¹´Java8ï¼ˆè¯­è¨€IDEã€SDKå±‚é¢ï¼‰ç›¸å¯¹äºå‰ç«¯æ›´åŠ çš„ç¨³å®šï¼ˆå‰ç«¯3ä¸ªæœˆä¸€æ¬¡å°æ›´æ–°ï¼Œ5ä¸ªæœˆä¸€æ¬¡å¤§æ›´æ–°ï¼‰
  * æ¯ä¸ªäººå¯¹äºéœ€æ±‚ç†è§£çš„æ–¹å¼ï¼ŒåŒ…æ‹¬äºŒæ¬¡å°è£…çš„Apiç²’åº¦è®¤è¯†ä¸ç»Ÿä¸€
  * å‰ç«¯å¯¹äºä¸€äº›ä¸šåŠ¡å±‚é¢çš„æ•°æ®è®¡ç®—ä¸éœ€è¦å¤ªå…³å¿ƒï¼Œä¸»è¦ç²¾åŠ›åº”è¯¥é›†ä¸­äºUIç»˜åˆ¶æ¸²æŸ“ä¸Š
  * åç«¯åŸåˆ™æƒ…å†µä¸‹ï¼Œæ˜¯ä¸ä¿¡ä»»å‰ç«¯å‘é€çš„ä»»ä½•æ•°æ®çš„ï¼ˆçœ‹å…·ä½“é¡¹ç›®çš„å®‰å…¨é˜€å€¼ï¼Œå®¹é”™åº¦ï¼‰
* å……åˆ†åˆ©ç”¨**UIButton**çš„ä¾¿æ·æ€§ï¼Œä½¿å…¶ä½œä¸ºä¸€ä¸ªUIå®¹å™¨ï¼Œåˆç†çš„åˆ©ç”¨æ­¤UIæ§ä»¶çš„å†…éƒ¨å­æ§ä»¶ï¼Œæœ‰åˆ©äºå»èŠ‚çœä»£ç ï¼Œæ–¹ä¾¿æ‹“å±•ã€‚å†…éƒ¨æºå¸¦ï¼š
  * èƒŒæ™¯å›¾å±‚ã€
  * ä¸€ä¸ªå­**UIImageView**
  * ä¸»æ ‡é¢˜**Label**
  * å‰¯æ ‡é¢˜**Label**
* ç»˜åˆ¶UI + æ•°æ®è¯·æ±‚ + æ•°æ®å¤„ç† == æˆå“
  * æ•°æ®å¤„ç†ï¼š[åˆ©ç”¨[**quicktype**](https://github.com/glideapps/quicktype)è‡ªåŠ¨å»ºç«‹æ•°æ®æ¨¡å‹]()

## ä¸‰ã€æˆ‘çš„æ„æ¶æ–¹æ¡ˆ

### 1ã€é€‰ç”¨çš„ï¼ˆå¤–æºï¼‰ç¬¬ä¸‰æ–¹æ¡†æ¶

* åŸºç¡€é…ç½®æ¡†æ¶
  * [**ReactiveSwift**](https://github.com/ReactiveCocoa/ReactiveSwift) æ–°ç‰ˆæœ¬æ”¯æŒ arm64 æ¨¡æ‹Ÿå™¨
  * [**RxCocoa**](https://github.com/ReactiveX/RxSwift)
  * [**RxRelay**](https://cocoapods.org/pods/RxRelay)
  * [**NSObject+Rx**](https://github.com/RxSwiftCommunity/NSObject-Rx)

* UIçº¦æŸ
  * [**SnapKit**](https://github.com/SnapKit/SnapKit)ï¼š[**Swift**](https://www.swift.org/) å¹³å°ä¸Šçš„ [**Masonry**](https://github.com/SnapKit/Masonry) å¹³æ›¿ï¼ˆarm64 æ¨¡æ‹Ÿå™¨ OKï¼‰

* ç½‘ç»œè¯·æ±‚æ¡†æ¶ï¼ˆå¤šçº¿ç¨‹å¼‚æ­¥äºŒæ¬¡å°è£…ï¼‰
  * [**YTKNetwork**](https://github.com/kanyun-inc/YTKNetwork)ï¼šOCåº“ï¼Œå¹¶ä¸å»ºè®®ç”¨ï¼Œä½†æ˜¯ä»–å¯¹[**AFNetworking(å·²æ°¸ä¹…åœæ›´)**](https://github.com/AFNetworking/AFNetworking)è¿›è¡Œäº†ä¸€ä¸ªå¾ˆå¥½çš„äºŒæ¬¡å°è£…ï¼ˆå°è£…ç‚¹åœ¨äºå¼€è¾Ÿå¤šçº¿ç¨‹ä»¥åº”å¯¹ä¸€ä¸ªé¡µé¢ä¸Šå¤šä¸ªè¯·æ±‚çš„ç‰¹æ®Šå±€é¢ï¼‰ã€‚è€Œ[**Swift**](https://www.swift.org/)å¹³å°ä¸Šçš„è¯·æ±‚æ¡†æ¶[**Alamofire**](https://github.com/Alamofire/Alamofire)è¿˜æœªå¯¹æ­¤åœºæ™¯è¿›è¡Œæ·±å…¥çš„å…¼å®¹
* å›¾ç‰‡å¤„ç†ï¼ˆå¼‚æ­¥ï¼‰
  * [**Kingfisher**](https://github.com/onevcat/Kingfisher) [**Swift**](https://www.swift.org/) å¹³å°ä¸Šå¯¹äºçš„ [**SDWebImage**](https://github.com/SDWebImage/SDWebImage) å¹³æ›¿

* åŠ¨ç”»ï¼ˆæ’­æ”¾å™¨ï¼‰
  * [**lottie-ios**](https://github.com/airbnb/lottie-ios)
* éŸ³è§†é¢‘æ’­æ”¾å™¨
  * [**BMPlayer**](https://github.com/BrikerMan/BMPlayer)ï¼šæ’­æ”¾å™¨ï¼ˆå‚ç…§ [**ZFPlayer**](https://github.com/renzifeng/ZFPlayer)ï¼‰

* èŠå¤©å·¥å…·
  * [**LiveChat**](https://github.com/livechat/chat-window-ios) <font color=red>**éœ€ä»˜è´¹**</font>

* ä¸€äº›å·¥å…·ç±»
  * ä¸€äº›ä¼˜ç§€çš„UIåº“
    * [**JXSegmentedView**](https://github.com/pujiaxin33/JXSegmentedView)ï¼š å­æ§åˆ¶å™¨åˆ‡æ¢
    * [**ESPullToRefresh**](https://github.com/eggswift/pull-to-refresh)ï¼š[**Swift**](https://www.swift.org/) å¹³å° [**MJRefresh**](https://github.com/CoderMJLee/MJRefresh) å¹³æ›¿ï¼ˆæš‚ä¸æ”¯æŒæ°´å¹³ç‰¹å¾ï¼‰
    * [**JXBanner**](https://github.com/Coder-TanJX/JXBanner)ï¼šè½®æ’­å›¾
    * [**LunarSwift**](https://github.com/6tail/lunar-swift )ï¼šæ— ç¬¬ä¸‰æ–¹ä¾èµ–çš„æ—¥å†å·¥å…·
    * [**CoreXLSX**](https://github.com/3973770/SwiftXLSX)ï¼š**Excel**
    * [**FSPopoverView**](https://github.com/lifution/FSPopoverView)ï¼šä¸‹æ‹‰ä¸‰è§’å°èœå•
    * [**SwiftEntryKit**](https://github.com/huri000/SwiftEntryKit)ï¼šç”¨ [**Swift**](https://www.swift.org/) ç¼–å†™çš„ç®€å•è€ŒåŠŸèƒ½å¼ºå¤§çš„å†…å®¹å±•ç¤ºå™¨
    * [**AMPopTip**](https://github.com/andreamazz/AMPopTip)ï¼šè‡ªå®šä¹‰å¼¹å‡ºæ¡†çš„å¼¹å‡ºæ–¹å‘ä»¥åŠæŒ‡å‘å…¶åŸç‚¹çš„ç®­å¤´ã€é¢œè‰²ã€è¾¹æ¡†åŠå¾„å’Œå­—ä½“
    * [**SkeletonView**](https://github.com/Juanpe/SkeletonView)ï¼šéª¨æ¶å±/é—ªåŠ¨å ä½
    * [**SwiftMessages**](https://github.com/SwiftKickMobile/SwiftMessages)ï¼šéå¸¸çµæ´»çš„ **UIKit** å’Œ **SwiftUI** è§†å›¾å’Œè§†å›¾æ§åˆ¶å™¨å±•ç¤ºåº“
  * [**ScreenProtectorKit**](https://github.com/prongbang/ScreenProtectorKit)ï¼šé˜²æ­¢å±å¹•æˆªå›¾å¹¶ä¿æŠ¤åå°åº”ç”¨ç¨‹åºå¿«ç…§
  * [**PhoneNumberKit**](https://github.com/marmelroy/PhoneNumberKit)ï¼šç”µè¯å·ç å·¥å…·åŒ…ï¼šç”¨äºè§£æã€æ ¼å¼åŒ–å’ŒéªŒè¯å›½é™…ç”µè¯å·ç ã€‚çµæ„Ÿæ¥æºï¼š`Google.libphonenumber`
  * [**IQKeyboardManagerSwift**](https://github.com/hackiftekhar/IQKeyboardManager)

### 2ã€æˆ‘çš„å°è£…ï¼ˆé‡ç‚¹ï¼‰

#### 2.1ã€å¯¹`UIViewController`çš„å°è£…

![image-20251206154722858](./assets/image-20251206154722858.png)

* è§£å†³æŸäº›æƒ…å†µä¸‹ï¼Œå¤šæ¬¡pushæˆ–è€…presentçš„Bug

  * æ­£å‘pushå¸¦å‚ä¼ å€¼
  * è‡ªå®šä¹‰å‡ºç°çš„æ–¹å‘
  * è‡ªå®šä¹‰å‡ºç°çš„æ–¹å¼æ˜¯pushè¿˜æ˜¯present
  * é€€å‡ºé¡µé¢éœ€è¦å›ä¼ çš„å‚æ•°

  ```swift
  DemoDetailVC()
      .byData("https://www.baidu.com")
      .byDirection(.fromBottom)   // ğŸ‘ˆ ä¸‹
      .byPush(self)
      .byCompletion { print("â¤ï¸ç»“æŸâ¤ï¸ fromBottom") }
  ```

  ```swift
  DemoDetailVC()
      .byData(3.14)// åŸºæœ¬æ•°æ®ç±»å‹
      .onResult { name in
          print("å›æ¥äº† \(name)")
      }
      .byPresent(self)
      .byCompletion{
          print("ç»“æŸ")
      }
  ```

#### 2.2ã€å¯¹UIå±‚çš„å°è£…æ ¼å¼

![image-20251206153544362](./assets/image-20251206153544362.png)

* æ‡’åŠ è½½+ä»£ç å—ï¼Œåœ¨å®é™…ç”¨çš„åœ°æ–¹åˆ©ç”¨è¿™ä¸ªUIçš„`alpha `æˆ–è€…`hidden`å±æ€§è¿›è¡Œå”¤èµ·

* åˆ©ç”¨`byAddTo`å°†çº¦æŸå…¨éƒ¨å†™è¿›æ­¤é—­åŒ…ä¸­ï¼Œä»£ç ä¸å†å‰²è£‚ã€‚å› ä¸ºçº¦æŸä¹Ÿæ˜¯å¯¹æ­¤UIæ§ä»¶çš„è¡¥å……è¯´æ˜

  ```swift
  private lazy var tvBlue: UITextView = { [unowned self] in
      	UITextView()
          .byAttributedText(NSMutableAttributedString(
              string: "ğŸ”— é»˜è®¤è“è‰²é“¾æ¥ï¼ˆç³»ç»Ÿæ ·å¼ï¼‰ï¼š",
              attributes: [
                  .font: UIFont.systemFont(ofSize: 15),
                  .foregroundColor: UIColor.secondaryLabel
              ])
              .add(NSAttributedString(
                  string: " Apple å®˜ç½‘",
                  attributes: [
                      .link: URL(string: "https://www.apple.com")!,
                      .font: UIFont.boldSystemFont(ofSize: 16)
                  ]))
              .add(NSAttributedString(
                  string: "\nå®¢æœç”µè¯ï¼š400-123-4567",
                  attributes: [.font: UIFont.systemFont(ofSize: 15)]
              )))
          .byEditable(false)
          .bySelectable(true)
          .byDataDetectorTypes([.link, .phoneNumber])   // ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«
          .byTextContainerInset(UIEdgeInsets(top: 8, left: 10, bottom: 8, right: 10))
          .byRoundedBorder(color: .systemGray4, width: 1, radius: 8)
          .byAddTo(self.view) { [unowned self] make in
              make.top.equalTo(self.tv.snp.bottom).offset(12)   // ç´§è·Ÿåœ¨ tv ä¸‹é¢
              make.centerX.equalToSuperview()
              make.height.equalTo(36)
          }
  }()
  ```

* æ—‹è½¬è§†å›¾

  ```swift
  btn.onTap { [weak self] btn in
  			 guard let _ = self else { return }
         btn.playTapBounce(haptic: .light)  // ğŸ‘ˆ ä¸´æ—¶æ”¾å¤§â†’å›å¼¹ï¼ˆä¸æ³¨å†Œä»»ä½•æ‰‹åŠ¿/äº‹ä»¶ï¼‰
         if btn.jobs_isSpinning {
             // æš‚åœæ—‹è½¬
             btn.bySpinPause()
             // æš‚åœè®¡æ—¶ï¼ˆä¿ç•™å·²ç´¯è®¡ç§’ï¼Œä¸é‡ç½®ï¼‰
             btn.timer?.pause()        // âœ… æ¨èï¼šä½ çš„ç»Ÿä¸€å†…æ ¸æŒ‚åœ¨ button.timer ä¸Š
             // å¦‚æœä½ æœ‰å°è£…æ–¹æ³•ï¼Œåˆ™ç”¨ï¼šbtn.pauseTimer()
             JobsToast.show(
                 text: "å·²æš‚åœæ—‹è½¬ & è®¡æ—¶",
                 config: .init().byBgColor(.systemGreen.withAlphaComponent(0.9)).byCornerRadius(12)
             )
         } else {
             // æ¢å¤æ—‹è½¬
             btn.bySpinStart()
             // æ¢å¤è®¡æ—¶ï¼ˆä»æš‚åœå¤„ç»§ç»­ç´¯åŠ ï¼‰
             btn.timer?.resume()       // âœ… æ¨è
             // å¦‚æœä½ æœ‰å°è£…æ–¹æ³•ï¼Œåˆ™ç”¨ï¼šbtn.resumeTimer()
             JobsToast.show(
                 text: "ç»§ç»­æ—‹è½¬ & è®¡æ—¶",
                 config: .init().byBgColor(.systemGreen.withAlphaComponent(0.9)).byCornerRadius(12)
             )
         }
  }
  ```

* æ‚¬æµ®è§†å›¾

  ```swift
  UIView().bySuspend { cfg in
      cfg
          .byContainer(view)
          .byFallbackSize(CGSize(width: 88, height: 44))
          .byDocking(.nearestEdge)
          .byInsets(UIEdgeInsets(top: 20, left: 16, bottom: 34, right: 16))
          .byHapticOnDock(true)
  }
  ```

  ```swift
  UIView().suspend(
      .default
          .byContainer(view)
          .byFallbackSize(CGSize(width: 88, height: 44))
          .byDocking(.nearestEdge)
          .byInsets(UIEdgeInsets(top: 20, left: 16, bottom: 34, right: 16))
          .byHapticOnDock(true)
  )
  ```

* è§’æ ‡æç¤º@å³ä¸Šè§’æç¤ºæ–‡æ¡ˆ

  * å±•ç¤º

    * å³ä¸Šè§’è‡ªå®šä¹‰æ–‡å­—

      ```swift
      UIView().byCornerBadgeText("NEW") { cfg in
                  cfg.byOffset(.init(horizontal: -6, vertical: 6))
                      .byInset(.init(top: 2, left: 6, bottom: 2, right: 6))
                      .byBgColor(.systemRed)
                      .byFont(.systemFont(ofSize: 11, weight: .bold))
                      .byShadow(color: UIColor.black.withAlphaComponent(0.25),
                                radius: 2,
                                opacity: 0.6,
                                offset: .init(width: 0, height: 1))
              }
      ```

    * å³ä¸Šè§’å°çº¢ç‚¹

      ```swift
      UIView().byCornerDot(diameter: 10, offset: .init(horizontal: -4, vertical: 4))// çº¢ç‚¹
      ```

  * å…³é—­

    ```swift
    UIButton(type: .system)
        /// äº‹ä»¶è§¦å‘@ç‚¹æŒ‰
        .onTap { [weak self] sender in
            guard let self else { return }
            sender.isSelected.toggle()
            if sender.isSelected {
                sender.byCornerDot(diameter: 10, offset: .init(horizontal: -4, vertical: 4))
            } else {
                sender.removeCornerBadge()
            }
            JobsToast.show(
                text: "ä¼˜æƒ @ç‚¹æŒ‰äº‹ä»¶",
                config: JobsToast.Config()
                    .byBgColor(.systemGreen.withAlphaComponent(0.9))
                    .byCornerRadius(12)
            )
        }
    ```


#### 2.3ã€å¯¹`UIButton`æŒ‰é’®çš„å°è£…

![image-20251206153259601](./assets/image-20251206153259601.png)

* é™¤äº†å‘ä¸‹å…¼å®¹æ—§çš„Apiçš„æŒ‰é’®ç®¡çº¿ï¼Œæ­¤Apiå¤§èƒ†å¯ç”¨Appleæœ€æ–°çš„Apiï¼š`UIButtonConfiguration`
* æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ï¼ˆåœ¨ä¸€èˆ¬çš„ç‚¹æŒ‰äº‹ä»¶åŸºç¡€ä¸Šï¼Œå¢åŠ äº†é•¿æŒ‰äº‹ä»¶çš„å‘å¤–æš´éœ²ï¼‰ï¼Œç»•è¿‡<font color=red>**@selector**</font>å’Œ**Target**ã€‚<font color=blue>**å¹¶å®ç°äº†è¿½åŠ åŠŸèƒ½**</font>
* å¯ä»¥å¯Œæ–‡æœ¬/æ™®é€šæ–‡æœ¬ï¼Œè®¾ç½®ä¸»æ ‡é¢˜/å‰¯æ ‡é¢˜
* æŒ‰é’®å›¾ + æŒ‰é’®å›¾æ–‡å…³ç³»ï¼ˆä½ç½®ã€è·ç¦»ï¼‰ã€èƒŒæ™¯å›¾
* ç‚¹å‡»æ’­æ”¾å£°éŸ³ï¼ˆé¢å¤–çš„ä¸€ä¸ªApiå®ç°ï¼Œä¸å ç”¨å…·ä½“çš„ä¸šåŠ¡å±‚ï¼‰
* æŒ‰é’®çš„å³ä¸Šè§’æ–‡æœ¬é…ç½®ï¼ˆå‚è€ƒOCåº“[**PPBadgeView**](https://github.com/jkpang/PPBadgeView)ï¼‰
* <font color=red>é£é™©æç¤ºï¼šä¸€æ—¦ç”¨äº†æœ€æ–°çš„`UIButtonConfiguration`å¯èƒ½å½±å“åˆ°è€æ—§çš„Apiçš„ä½¿ç”¨ï¼ˆç›´è§‚æ„Ÿå—ï¼Œè€æ—§Apié…ç½®çš„æŒ‰é’®å°†ä¼šä¸èµ·æ•ˆï¼‰</font>

```swift
/// ä½¿ç”¨çš„æ—¶å€™ï¼Œä»…éœ€è¦å¤åˆ¶ï¼Œä¾æ®å…·ä½“éœ€æ±‚è¿›è¡Œåˆ é™¤ä¸å¿…è¦çš„é¡¹ï¼Œå’Œä¿®æ”¹é…ç½®çš„å€¼ï¼ˆç‰¹åˆ«æ˜¯çº¦æŸï¼‰
private lazy var exampleButton: UIButton = {
    UIButton.sys()
        /// èƒŒæ™¯è‰²
        .byBackgroundColor(.systemGreen, for: .normal)
        /// æ™®é€šå­—ç¬¦ä¸²@è®¾ç½®ä¸»æ ‡é¢˜
        .byTitle("æ˜¾ç¤º", for: .normal)
        .byTitle("éšè—", for: .selected)
        .byTitleColor(.systemBlue, for: .normal)
        .byTitleColor(.systemRed, for: .selected)
        .byTitleFont(.systemFont(ofSize: 16, weight: .medium))
        /// æ™®é€šå­—ç¬¦ä¸²@è®¾ç½®å‰¯æ ‡é¢˜
        .bySubTitle("æ˜¾ç¤º", for: .normal)
        .bySubTitle("éšè—", for: .selected)
        .bySubTitleColor(.systemBlue, for: .normal)
        .bySubTitleColor(.systemRed, for: .selected)
        .bySubTitleFont(.systemFont(ofSize: 16, weight: .medium))
        /// å¯Œæ–‡æœ¬å­—@è®¾ç½®ä¸»æ ‡é¢˜
        .byRichTitle(JobsRichText.make([
            JobsRichRun(.text("Â¥99")).font(.systemFont(ofSize: 18, weight: .semibold)).color(.systemRed),
            JobsRichRun(.text(" /æœˆ")).font(.systemFont(ofSize: 16)).color(.white)
        ]))
         /// å¯Œæ–‡æœ¬å­—@è®¾ç½®å‰¯æ ‡é¢˜
        .byRichSubTitle(JobsRichText.make([
            JobsRichRun(.text("åŸä»· ")).font(.systemFont(ofSize: 12)).color(.white.withAlphaComponent(0.8)),
            JobsRichRun(.text("Â¥199")).font(.systemFont(ofSize: 12, weight: .medium)).color(.systemYellow)
        ]))
        /// æŒ‰é’®å›¾ç‰‡@å›¾æ–‡å…³ç³»
        .byImage("eye.slash".sysImg, for: .normal)                // æœªé€‰ä¸­å›¾æ ‡
        .byImage("eye".sysImg, for: .selected)                    // é€‰ä¸­å›¾æ ‡
        .byContentEdgeInsets(UIEdgeInsets(top: 4, left: 8, bottom: 4, right: 8))// å›¾æ–‡å†…è¾¹è·
        .byTitleEdgeInsets(UIEdgeInsets(top: 0, left: 6, bottom: 0, right: -6)) // å›¾æ ‡ä¸æ–‡å­—é—´è·
        /// ç‚¹å‡»@æ’­æ”¾å£°éŸ³
        .byTapSound("Sound.wav")    
        /// æ™®é€š@ç‚¹æŒ‰äº‹ä»¶è§¦å‘
        .onTap { [weak self] sender in
            guard let self else { return }
            sender.isSelected.toggle()
            // æ–‡å­—ä¸å›¾æ ‡è‡ªåŠ¨åˆ‡æ¢
            self.passwordTF.isSecureTextEntry.toggle()
            self.passwordTF.togglePasswordVisibility()
            print("ğŸ‘ å½“å‰çŠ¶æ€ï¼š\(sender.isSelected ? "éšè—å¯†ç " : "æ˜¾ç¤ºå¯†ç ")")
        }
        /// è¿½åŠ @ç‚¹æŒ‰äº‹ä»¶è§¦å‘
        .onTapAppend{ sender in
            print("è¿½åŠ çš„ç‚¹æŒ‰äº‹ä»¶")
        }
        /// å³ä¸Šè§’æç¤ºæ–‡æ¡ˆ@å°çº¢ç‚¹
        .byCornerDot(diameter: 10, offset: .init(horizontal: -4, vertical: 4))// çº¢ç‚¹
        /// å³ä¸Šè§’æç¤ºæ–‡æ¡ˆ@æ–‡å­—
        .byCornerBadgeText("NEW") { cfg in
            cfg.byOffset(.init(horizontal: -6, vertical: 6))
                .byInset(.init(top: 2, left: 6, bottom: 2, right: 6))
                .byBgColor(.systemRed)
                .byFont(.systemFont(ofSize: 11, weight: .bold))
                .byShadow(color: UIColor.black.withAlphaComponent(0.25),
                          radius: 2,
                          opacity: 0.6,
                          offset: .init(width: 0, height: 1))
        }
        /// æ™®é€š@é•¿æŒ‰äº‹ä»¶è§¦å‘
        .onLongPress(minimumPressDuration: 0.8) { btn, gr in
             if gr.state == .began {
                 btn.alpha = 0.6
                 print("é•¿æŒ‰å¼€å§‹ on \(btn)")
             } else if gr.state == .ended || gr.state == .cancelled {
                 btn.alpha = 1.0
                 print("é•¿æŒ‰ç»“æŸ")
             }
         }
        /// è¿½åŠ @é•¿æŒ‰äº‹ä»¶è§¦å‘
        .onLongPressAppend(minimumPressDuration: 0.8) { btn, gr in
            print("è¿½åŠ çš„é•¿æŒ‰äº‹ä»¶")
        }
        .byAddTo(view) { [unowned self] make in
            make.top.equalTo(self.view.safeAreaLayoutGuide.snp.top).offset(40)
            make.left.right.equalToSuperview().inset(24)
            make.height.equalTo(44)
        }
        /// UIButtonConfiguration
        if #available(iOS 15.0, *) {
            b.byConfiguration { c in
                c.byTitle("èƒŒæ™¯å›¾ï¼šBase64 / URL")
                    .byBaseForegroundCor(.white)
                    .byContentInsets(.init(top: 16, leading: 16, bottom: 16, trailing: 16))
                    .byCornerStyle(.large)
                    .byImagePlacement(.trailing)
                    .byImagePadding(8)
            }
        } else {
            b.byTitle("èƒŒæ™¯å›¾ï¼šBase64 / URL", for: .normal)
                .byTitleColor(.white, for: .normal)
                .byContentEdgeInsets(.init(top: 16, left: 16, bottom: 16, right: 16))
                .byBgColor(.systemBlue)
        }
}()
```

#### 2.4ã€å¯¹`UIGestureRecognizer`æ‰‹åŠ¿çš„å°è£…

<p align="center">
  <img src="./assets/image-20251206153407706.png" width="45%">
  <img src="./assets/image-20251206153439484.png" width="45%">
</p>

* ç»•è¿‡<font color=red>**@selector**</font>å’Œ**Target**ï¼Œåªå…³å¿ƒåŠ è½½çš„è§†å›¾å¯¹è±¡ï¼Œä»¥åŠå“åº”æ–¹æ³•

  * ```swift
    // MARK: - ç‚¹å‡» Tap
    UIView().jobs_addGesture(
        UITapGestureRecognizer
            .byConfig { gr in
                print("Tap è§¦å‘ on: \(String(describing: gr.view))")
            }
            .byTaps(2)                       // åŒå‡»
            .byTouches(1)                    // å•æŒ‡
            .byCancelsTouchesInView(true)
            .byEnabled(true)
            .byName("customTap")
    )
    ```

  * ```swift
    // MARK: - é•¿æŒ‰ LongPress
    UIView().addGestureRecognizer(
        UILongPressGestureRecognizer
            .byConfig { gr in
                if gr.state == .began {
                    print("é•¿æŒ‰å¼€å§‹")
                } else if gr.state == .ended {
                    print("é•¿æŒ‰ç»“æŸ")
                }
            }
            .byMinDuration(0.8)              // æœ€å°æŒ‰å‹æ—¶é•¿
            .byMovement(12)                  // å…è®¸ç§»åŠ¨è·ç¦»
            .byTouches(1)                    // å•æŒ‡
    )
    ```

  * ```swift
    // MARK: - æ‹–æ‹½ Pan
    UIView().jobs_addGesture(
        UIPanGestureRecognizer
            .byConfig { gr in
                let p = (gr as! UIPanGestureRecognizer).translation(in: gr.view)
                if gr.state == .changed {
                    print("æ‹–æ‹½ä¸­: \(p)")
                } else if gr.state == .ended {
                    print("æ‹–æ‹½ç»“æŸ")
                }
            }
            .byMinTouches(1)
            .byMaxTouches(2)
            .byCancelsTouchesInView(true)
    )
    ```

  * ```swift
    // MARK: - è½»æ‰« Swipeï¼ˆå•æ–¹å‘ï¼‰
    UIView().jobs_addGesture(
        UISwipeGestureRecognizer
            .byConfig { _ in
                print("ğŸ‘‰ å³æ»‘è§¦å‘")
            }
            .byDirection(.right)
            .byTouches(1)
    )
    // MARK: - è½»æ‰« Swipeï¼ˆå¤šæ–¹å‘ï¼‰
    let swipeContainer = UIView()
    swipeContainer.jobs_addGesture(
        UISwipeGestureRecognizer
            .byConfig { _ in print("â† å·¦æ»‘") }
            .byDirection(.left)
    )
    swipeContainer.jobs_addGesture(
        UISwipeGestureRecognizer
            .byConfig { _ in print("â†’ å³æ»‘") }
            .byDirection(.right)
    )
    swipeContainer.jobs_addGesture(
        UISwipeGestureRecognizer
            .byConfig { _ in print("â†‘ ä¸Šæ»‘") }
            .byDirection(.up)
    )
    swipeContainer.jobs_addGesture(
        UISwipeGestureRecognizer
            .byConfig { _ in print("â†“ ä¸‹æ»‘") }
            .byDirection(.down)
    )
    ```

  * ```swift
    // MARK: - æåˆ Pinch
    UIView().jobs_addGesture(
        UIPinchGestureRecognizer
            .byConfig { _ in }
            .byOnScaleChange { gr, scale in
                if gr.state == .changed {
                    print("ç¼©æ”¾æ¯”ä¾‹: \(scale)")
                }
            }
            .byScale(1.0)
    )
    ```

  * ```swift
    // MARK: - æ—‹è½¬ Rotate
    UIView().jobs_addGesture(
        UIRotationGestureRecognizer
            .byConfig { _ in }
            .byOnRotationChange { gr, r in
                if gr.state == .changed {
                    print("æ—‹è½¬è§’åº¦(å¼§åº¦): \(r)")
                }
            }
            .byRotation(0)
    )
    ```

  * ```swift
    // MARK: - ç›´æ¥è®¾ç½®æ‰‹åŠ¿ï¼ˆå·²é”šå®šè§†å›¾ï¼‰
    let views = UIView()
        .addTapAction { gr in
            print("ç‚¹å‡» \(gr.view!)")
        }
        .addLongPressAction { gr in
            if gr.state == .began { print("é•¿æŒ‰å¼€å§‹") }
        }
        .addPanAction { gr in
            let p = (gr as! UIPanGestureRecognizer).translation(in: gr.view)
            print("æ‹–æ‹½ä¸­: \(p)")
        }
        .addPinchAction { gr in
            let scale = (gr as! UIPinchGestureRecognizer).scale
            print("ç¼©æ”¾æ¯”ä¾‹ï¼š\(scale)")
        }
        .addRotationAction { gr in
            let rotation = (gr as! UIRotationGestureRecognizer).rotation
            print("æ—‹è½¬è§’åº¦ï¼š\(rotation)")
        }
    ```

#### 2.5ã€å¯¹`UITextView`çš„å°è£…ï¼ˆå«è¾“å…¥ç›‘æ§è¿‡æ»¤ï¼‰

* è¾“å…¥ç›‘æ§ + é€€æ ¼ç›‘æ§

  ```swift
  private lazy var tv: UITextView = { [unowned self] in
      UITextView()
          .byText("è¿™é‡Œå±•ç¤ºåŸºç¡€é“¾å¼è°ƒç”¨ï¼šå­—ä½“ã€é¢œè‰²ã€è¾¹æ¡†ã€å†…è¾¹è·ç­‰ã€‚")
          .byFont(.systemFont(ofSize: 16))
          .byTextColor(.label)
          .byTextAlignment(.left)
          .byEditable(true)
          .bySelectable(true)
          .byTextContainerInset(UIEdgeInsets(top: 8, left: 10, bottom: 8, right: 10))
          .byRoundedBorder(color: .systemGray4, width: 1, radius: 8)
          .onChange { tv, input, old, isDeleting in
              let new = tv.text ?? ""
              print("âœï¸ input='\(input)' old='\(old)' new='\(new)' deleting=\(isDeleting)")
  
              // 6~20 æœ‰æ•ˆï¼šç»¿è¾¹ï¼Œå¦åˆ™çº¢è¾¹
              let ok = (6...20).contains(new.count)
              tv.layer.borderWidth = 1
              tv.layer.borderColor = (ok ? UIColor.systemGreen : UIColor.systemRed).cgColor
              tv.layer.masksToBounds = true
              if #available(iOS 13.0, *) { tv.layer.cornerCurve = .continuous }
          }
          .onBackspace { tv in
              print("ğŸ‘ˆ backspace: len=\(tv.text?.count ?? 0)")
          }
          .byAddTo(self.view) { [unowned self] make in
              make.top.equalTo(self.textField.snp.bottom).offset(12)
              make.centerX.equalToSuperview()
              make.height.equalTo(36)
          }
  }()
  ```

* é…åˆå¯Œæ–‡æœ¬

  ```swift
  private lazy var tvBlue: UITextView = { [unowned self] in
      return UITextView()
          .byAttributedText(NSMutableAttributedString(
              string: "ğŸ”— é»˜è®¤è“è‰²é“¾æ¥ï¼ˆç³»ç»Ÿæ ·å¼ï¼‰ï¼š",
              attributes: [
                  .font: UIFont.systemFont(ofSize: 15),
                  .foregroundColor: UIColor.secondaryLabel
              ])
              .add(NSAttributedString(
                  string: " Apple å®˜ç½‘",
                  attributes: [
                      .link: URL(string: "https://www.apple.com")!,
                      .font: UIFont.boldSystemFont(ofSize: 16)
                  ]))
              .add(NSAttributedString(
                  string: "\nå®¢æœç”µè¯ï¼š400-123-4567",
                  attributes: [.font: UIFont.systemFont(ofSize: 15)]
              )))
          .byEditable(false)
          .bySelectable(true)
          .byDataDetectorTypes([.link, .phoneNumber])   // ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«
          .byTextContainerInset(UIEdgeInsets(top: 8, left: 10, bottom: 8, right: 10))
          .byRoundedBorder(color: .systemGray4, width: 1, radius: 8)
          .byAddTo(self.view) { [unowned self] make in
              make.top.equalTo(self.tv.snp.bottom).offset(12)   // ç´§è·Ÿåœ¨ tv ä¸‹é¢
              make.centerX.equalToSuperview()
              make.height.equalTo(36)
          }
  }()
  ```

#### 2.6ã€å¯¹`UITextField`è¾“å…¥æ¡†çš„å°è£…ï¼ˆå«è¾“å…¥ç›‘æ§è¿‡æ»¤ï¼‰

* å¯†ç è¾“å…¥æ¡†

  ```swift
  /// å¯†ç è¾“å…¥æ¡†
  private lazy var tf1: UITextField = {
      UITextField()
          .byDelegate(self) // æ•°æ®æº
          .byPlaceholder("è¯·è¾“å…¥å¯†ç ï¼ˆ6-20 ä½ï¼‰")
          .bySecureTextEntry(true)
          .byInputAccessoryView(UIToolbar().byItems([
              UIBarButtonItem()
                  .byTitle("æ¸…ç©º")
                  .byTitleFont(.systemFont(ofSize: 15))
                  .byTitleColor(.systemRed)
                  .byStyle(.plain)
                  .onTap { [weak self] _ in
                      guard let self = self else { return }   // âœ… ç¡®ä¿ç”Ÿå‘½å‘¨æœŸå®‰å…¨
                      /// TODO
                  },
              UIBarButtonItem(systemItem: .flexibleSpace),
              UIBarButtonItem()
                  .byTitle("å®Œæˆ")
                  .byTitleFont(.systemFont(ofSize: 15))
                  .byTitleColor(.systemYellow)
                  .byStyle(.done)
                  .onTap { [weak self] _ in
                      guard let self = self else { return }   // âœ… ç¡®ä¿ç”Ÿå‘½å‘¨æœŸå®‰å…¨
                      view.endEditing(true)
                  },
          ])
          .bySizeToFit())                                     // âœ… ç»™å¯†ç æ¡†è‡ªå®šä¹‰ inputAccessoryView
          .byBorderStyle(.roundedRect)
          .byReturnKeyType(.done)
          .byTextContentType(.password)
          .byPasswordRules(nil) // ä¹Ÿå¯è‡ªå®šä¹‰
      //            .byLeftView(Self.makeIcon("lock"), mode: .always)
          .byLeftIcon(UIImage(systemName: "lock"),
                      tint: .secondaryLabel,
                      size: .init(width: 18, height: 18),
                      leading: 12, spacing: 8)
          .byRightView(UIButton(type: .system)
                       // æ™®é€šæ–‡å­—ï¼šæœªé€‰ä¸­çŠ¶æ€æ ‡é¢˜
                       .byTitle("æ˜¾ç¤º", for: .normal)
                       // é€‰ä¸­çŠ¶æ€æ ‡é¢˜
                       .byTitle("éšè—", for: .selected)
                       // æ–‡å­—é¢œè‰²ï¼šåŒºåˆ†çŠ¶æ€
                       .byTitleColor(.systemBlue, for: .normal)
                       .byTitleColor(.systemRed, for: .selected)
                       // å­—ä½“ç»Ÿä¸€
                       .byTitleFont(.systemFont(ofSize: 16, weight: .medium))
                       // å›¾æ ‡ï¼ˆSF Symbolï¼‰
                       .byImage(UIImage(systemName: "eye.slash"), for: .normal)   // æœªé€‰ä¸­å›¾æ ‡
                       .byImage(UIImage(systemName: "eye"), for: .selected)       // é€‰ä¸­å›¾æ ‡
                       // å›¾æ–‡å†…è¾¹è·
                       .byContentEdgeInsets(UIEdgeInsets(top: 4, left: 8, bottom: 4, right: 8))
                       // å›¾æ ‡ä¸æ–‡å­—é—´è·
                       .byTitleEdgeInsets(UIEdgeInsets(top: 0, left: 6, bottom: 0, right: -6))
                       // ç‚¹æŒ‰äº‹ä»¶ï¼ˆç»Ÿä¸€å…¥å£ï¼‰
                       .onTap { [weak self] sender in
                           guard let self else { return }
                           sender.isSelected.toggle()
                           // æ–‡å­—ä¸å›¾æ ‡è‡ªåŠ¨åˆ‡æ¢
                           self.passwordTF.isSecureTextEntry.toggle()
                           self.passwordTF.togglePasswordVisibility()
                           print("ğŸ‘ å½“å‰çŠ¶æ€ï¼š\(sender.isSelected ? "éšè—å¯†ç " : "æ˜¾ç¤ºå¯†ç ")")
                       }, mode: .always)
          .byInputView(datePicker) // æ¼”ç¤ºè‡ªå®šä¹‰ inputViewï¼šç‚¹å¯†ç æ¡†å¼¹æ—¥æœŸï¼ˆçº¯å±•ç¤ºï¼Œä¸å»ºè®®çœŸå®é¡¹ç›®è¿™ä¹ˆç”¨ï¼‰
          // é™åˆ¶è¾“å…¥
          .byLimitLength(12) {[weak self] isLimited, tf in
              guard let self else { return }
              tipLabel.byVisible(isLimited)
          }
          .onChange { tf, input, old, isDeleting in
              let new = tf.text ?? ""
              print("âœï¸ input='\(input)' old='\(old)' new='\(new)' deleting=\(isDeleting)")
  
              // ç¤ºä¾‹ï¼š6~20 ä½æœ‰æ•ˆæ€æ ·å¼
              let ok = (6...20).contains(new.count)
              tf.layer.borderWidth = 1
              tf.layer.borderColor = (ok ? UIColor.systemGreen : UIColor.systemRed).cgColor
              tf.layer.masksToBounds = true
              if #available(iOS 13.0, *) { tf.layer.cornerCurve = .continuous }
          }
          .byAddTo(view) { [unowned self] make in
              make.top.equalTo(textField.snp.bottom).offset(12)
              make.centerX.equalToSuperview()
              make.height.equalTo(36)
          }
  }()
  ```

* é‚®ç®±è¾“å…¥æ¡†

  ```swift
  /// é‚®ç®±è¾“å…¥æ¡†
  private lazy var tf1: UITextField = {
      UITextField()
          // æ•°æ®æº
          .byDelegate(self)
          // åŸºç¡€è§†è§‰
          .byPlaceholder("è¯·è¾“å…¥é‚®ç®±ï¼ˆè‡³å°‘ 3 ä¸ªå­—ç¬¦ï¼‰")
          .byTextColor(.label)
          .byFont(.systemFont(ofSize: 16))
          .byTextAlignment(.natural)
          .byBorderStyle(.roundedRect)
          .byClearButtonMode(.whileEditing)
  
          .byInputAccessoryView(accessory)
          // é”®ç›˜
          .byKeyboardType(.emailAddress)
          .byKeyboardAppearance(.dark)
          .byReturnKeyType(.next)
          .byEnablesReturnKeyAutomatically(true)
          // æ™ºèƒ½è¾“å…¥
          .byAutocapitalizationType(.none)
          .byAutocorrectionType(.no)
          .bySpellCheckingType(.no)
          .bySmartQuotesType(.no)
          .bySmartDashesType(.no)
          .bySmartInsertDeleteType(.no)
          // å†…å®¹ç±»å‹
          .byTextContentType(.emailAddress)
          // ç¼–è¾‘å±æ€§
          .byAllowsEditingTextAttributes(true)
          .byDefaultTextAttributes([.kern: 0.5]) // å­—è·
          .byTypingAttributes([.foregroundColor: UIColor.label])
          // å·¦/å³è§†å›¾
          //.byLeftView(makeIcon("envelope"), mode: .always)
          .byLeftIcon(UIImage(systemName: "envelope"),
                      tint: .secondaryLabel,
                      size: .init(width: 18, height: 18),
                      leading: 12, spacing: 8)
          .onChange { tf, input, old, isDeleting in
              let new = tf.text ?? ""
              print("âœï¸ input='\(input)' old='\(old)' new='\(new)' deleting=\(isDeleting)")
  
              // ç¤ºä¾‹ï¼š6~20 ä½æœ‰æ•ˆæ€æ ·å¼
              let ok = (6...20).contains(new.count)
              tf.layer.borderWidth = 1
              tf.layer.borderColor = (ok ? UIColor.systemGreen : UIColor.systemRed).cgColor
              tf.layer.masksToBounds = true
              if #available(iOS 13.0, *) { tf.layer.cornerCurve = .continuous }
          }
          .byAddTo(view) { [unowned self] make in
              make.top.equalTo(textField.snp.bottom).offset(12)
              make.centerX.equalToSuperview()
              make.height.equalTo(36)
          }
  }()
  ```

#### 2.7ã€å¯¹`UIImageView`çš„å°è£…ï¼ˆæš‚æ—¶åªå±•ç¤º[**Kingfisher**](https://github.com/onevcat/Kingfisher)ã€‚[**SDWebImage**](https://github.com/SDWebImage/SDWebImage)ä¹Ÿæœ‰ï¼‰

* `UIImageView`@å­—ç¬¦ä¸²æœ¬åœ°å›¾

  ```swift
  /// UIImageView@å­—ç¬¦ä¸²æœ¬åœ°å›¾
  private lazy var localImgView: UIImageView = {
      UIImageView()
          .byImage("Ani".img)
          .byContentMode(.scaleAspectFill)
          .byClipsToBounds()
          .onTap { iv in
              toastBy("å•å‡»å›¾ç‰‡ï¼š\(iv)")
           }
          .onLongPress(minDuration: 0.8, movement: 12, touches: 1, name: "customLongPress") { iv, gr in
              switch gr.state {
              case .began:
                  toastBy("é•¿æŒ‰å¼€å§‹ on \(iv)")
              case .ended, .cancelled, .failed:
                  toastBy("é•¿æŒ‰ç»“æŸ on \(iv)")
              default:
                  break
              }
          }
          .byAddTo(scrollView) { [unowned self] make in
              make.top.equalTo(scrollView.contentLayoutGuide.snp.top).offset(10.h)
              make.left.equalTo(scrollView.frameLayoutGuide.snp.left).offset(20.w)
              make.right.equalTo(scrollView.frameLayoutGuide.snp.right).inset(20.w)
              make.height.equalTo(180.h)
          }
  }()
  ```

* `UIImageView`å­—ç¬¦ä¸²ç½‘ç»œå›¾@[**Kingfisher**](https://github.com/onevcat/Kingfisher)

  ```swift
  /// UIImageViewå­—ç¬¦ä¸²ç½‘ç»œå›¾@Kingfisher
  private lazy var asyncImgView: UIImageView = {
      UIImageView()
          .byAsyncImageKF("https://picsum.photos/200/300", fallback: "å”è€é¸­".img)
          .byContentMode(.scaleAspectFill)
          .byClipsToBounds()
          .onTap { iv in
              toastBy("å•å‡»å›¾ç‰‡ï¼š\(iv)")
           }
          .onLongPress(minDuration: 0.8, movement: 12, touches: 1, name: "customLongPress") { iv, gr in
              switch gr.state {
              case .began:
                  toastBy("é•¿æŒ‰å¼€å§‹ on \(iv)")
              case .ended, .cancelled, .failed:
                  toastBy("é•¿æŒ‰ç»“æŸ on \(iv)")
              default:
                  break
              }
          }
          .byAddTo(scrollView) { [unowned self] make in
              make.top.equalTo(localImgView.snp.bottom).offset(20.h)
              make.left.equalTo(scrollView.frameLayoutGuide.snp.left).offset(20.w)
              make.right.equalTo(scrollView.frameLayoutGuide.snp.right).inset(20.w)
              make.height.equalTo(180.h)
          }
  }()
  ```

* `UIImageView`ç½‘ç»œå›¾ï¼ˆå¤±è´¥å…œåº•å›¾ï¼‰@[**Kingfisher**](https://github.com/onevcat/Kingfisher)

  ```swift
  /// UIImageViewç½‘ç»œå›¾ï¼ˆå¤±è´¥å…œåº•å›¾ï¼‰@Kingfisher
  private lazy var wrapperImgView: UIImageView = {
      UIImageView()
          .byContentMode(.scaleAspectFill)
          .byClipsToBounds()
          .kf_setImage(from: "https://picsum.photos/200", placeholder: "Ani".img)
          .onTap { iv in
              toastBy("å•å‡»å›¾ç‰‡ï¼š\(iv)")
           }
          .onLongPress(minDuration: 0.8, movement: 12, touches: 1, name: "customLongPress") { iv, gr in
              switch gr.state {
              case .began:
                  toastBy("é•¿æŒ‰å¼€å§‹ on \(iv)")
              case .ended, .cancelled, .failed:
                  toastBy("é•¿æŒ‰ç»“æŸ on \(iv)")
              default:
                  break
              }
          }
          .byAddTo(scrollView) { [unowned self] make in
              make.top.equalTo(asyncImgViewSD.snp.bottom).offset(20.h)
              make.left.equalTo(scrollView.frameLayoutGuide.snp.left).offset(20.w)
              make.right.equalTo(scrollView.frameLayoutGuide.snp.right).inset(20.w)
              make.height.equalTo(180.h)
          }
  }()
  ```

#### 2.8ã€å¯¹`UICollectionView`çš„å°è£…

![image-20251206153328096](./assets/image-20251206153328096.png)

* æ²¡æ•°æ®æ—¶ï¼Œè‡ªåŠ¨æ˜¾ç¤ºç©ºæ€å›¾ï¼ˆæ˜¯ä¸€ä¸ªæŒ‰é’®ï¼‰
* å°è£…äº†ä¸Šä¸‹æ‹‰åŠŸèƒ½ï¼ˆåŸºäº[**ESPullToRefresh**](https://github.com/eggswift/pull-to-refresh)ï¼‰

```swift
private lazy var flowLayout: UICollectionViewFlowLayout = {
    UICollectionViewFlowLayout()
        .byScrollDirection(.vertical)
        .byMinimumLineSpacing(10)
        .byMinimumInteritemSpacing(10)
        .bySectionInset(UIEdgeInsets(top: 10, left: 12, bottom: 10, right: 12))
}()

private lazy var collectionView: UICollectionView = {
    UICollectionView(frame: .zero, collectionViewLayout: flowLayout)
        .byDataSource(self)
        .byDelegate(self)
        .registerCell(UICollectionViewCell.self)
        .byBackgroundView(nil)
        .byDragInteractionEnabled(false)

        // ç©ºæ€æŒ‰é’®ï¼ˆä¸ UITableView Demo ä¸€è‡´ï¼‰
        .jobs_emptyButtonProvider { [unowned self] in
            UIButton.sys()
                .byTitle("æš‚æ— æ•°æ®", for: .normal)
                .bySubTitle("ç‚¹æˆ‘å¡«å……ç¤ºä¾‹æ•°æ®", for: .normal)
                .byImage(UIImage(systemName: "square.grid.2x2"), for: .normal)
                .byImagePlacement(.top)
                .onTap { [weak self] _ in
                    guard let self else { return }
                    self.items = (1...12).map { "Item \($0)" }
                    self.collectionView.byReloadData()        // âœ… reload åè‡ªåŠ¨è¯„ä¼°ç©ºæ€
                }
                // å¯é€‰ï¼šè‡ªå®šä¹‰ç©ºæ€æŒ‰é’®å¸ƒå±€
                .jobs_setEmptyLayout { btn, make, host in
                    make.centerX.equalTo(host)
                    make.centerY.equalTo(host).offset(-40)
                    make.leading.greaterThanOrEqualTo(host).offset(16)
                    make.trailing.lessThanOrEqualTo(host).inset(16)
                    make.width.lessThanOrEqualTo(host).multipliedBy(0.9)
                }
        }

        // ä¸‹æ‹‰åˆ·æ–° Header
        .configRefreshHeader(component: JobsDefaultHeader(),
                             container: self,
                             trigger: 66) { [weak self] in
            guard let self else { return }
            Task { @MainActor in
                try? await Task.sleep(nanoseconds: 1_000_000_000)
                self.rows = 20
                self.tableView.byReloadData()
                self.tableView.switchRefreshHeader(to: .normal)
                self.tableView.switchRefreshFooter(to: .normal) // å¤ä½â€œæ— æ›´å¤šâ€
            }
        }
        // ä¸Šæ‹‰åŠ è½½ Footer
        .configRefreshFooter(component: JobsDefaultFooter(),
                                      container: self,
                                      trigger: 66) { [weak self] in
            guard let self else { return }
            Task { @MainActor in
                try? await Task.sleep(nanoseconds: 1_000_000_000)
                if self.rows < 60 {
                    self.rows += 20
                    self.tableView.byReloadData()
                    self.tableView.switchRefreshFooter(to: .normal)
                } else {
                    self.tableView.switchRefreshFooter(to: .noMoreData)
                }
            }
        }

        .byAddTo(view) { [unowned self] make in
            if view.jobs_hasVisibleTopBar() {
                make.top.equalTo(self.gk_navigationBar.snp.bottom).offset(10)
                make.left.right.bottom.equalToSuperview()
            } else {
                make.edges.equalToSuperview()
            }
        }
}()

// ============================== UICollectionViewDataSource ==============================
func numberOfSections(in collectionView: UICollectionView) -> Int { 1 }

func collectionView(_ collectionView: UICollectionView, numberOfItemsInSection section: Int) -> Int {
    items.count
}

func collectionView(_ collectionView: UICollectionView,
                    cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {
    let cell: UICollectionViewCell = collectionView.dequeueCell(UICollectionViewCell.self, for: indexPath)
    let label: UILabel
    if let exist = cell.contentView.viewWithTag(1001) as? UILabel {
        label = exist
    } else {
        label = UILabel()
            .byNumberOfLines(1)
            .byTextAlignment(.center)
            .byFont(.systemFont(ofSize: 16, weight: .medium))
            .byTextColor(.label)
            .byTag(1001)
            .byAddTo(cell.contentView) { make in     // âœ… åŠ åˆ° contentView
                make.edges.equalToSuperview().inset(8)
            }

        // èƒŒæ™¯ & åœ†è§’ï¼ˆåªéœ€è®¾ä¸€æ¬¡ï¼‰
        cell.contentView.byBgColor(.secondarySystemBackground)
            .byCornerRadius(10)
            .byMasksToBounds(true)
    }

    label.text = items[indexPath.item]
    return cell
}
// ============================== UICollectionViewDelegate ==============================
func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) {
    print("âœ… didSelect Item: \(indexPath.item)")
    collectionView.deselectItem(at: indexPath, animated: true)
}

// ============================== UICollectionViewDelegateFlowLayout ==============================
func collectionView(_ collectionView: UICollectionView,
                    layout collectionViewLayout: UICollectionViewLayout,
                    sizeForItemAt indexPath: IndexPath) -> CGSize {
    // è®¡ç®— 2 åˆ—å¡ç‰‡å®½åº¦ï¼ˆè€ƒè™‘ sectionInset / interItemSpacingï¼‰
    guard let layout = collectionViewLayout as? UICollectionViewFlowLayout else {
        return CGSize(width: 100, height: 60)
    }
    let inset = layout.sectionInset
    let spacing = layout.minimumInteritemSpacing
    let columns: CGFloat = 2
    let totalH = inset.left + inset.right + (columns - 1) * spacing
    let w = floor((collectionView.bounds.width - totalH) / columns)
    return CGSize(width: w, height: 64)
}
```

#### 2.9ã€å¯¹`UITableView`çš„å°è£…

* æ²¡æ•°æ®æ—¶ï¼Œè‡ªåŠ¨æ˜¾ç¤ºç©ºæ€å›¾ï¼ˆæ˜¯ä¸€ä¸ªæŒ‰é’®ï¼‰
* å°è£…äº†ä¸Šä¸‹æ‹‰åŠŸèƒ½ï¼ˆåŸºäº[**ESPullToRefresh**](https://github.com/eggswift/pull-to-refresh)ï¼‰

```swift
private lazy var tableView: UITableView = {
    UITableView(frame: .zero, style: .insetGrouped)
        .byDataSource(self)
        .byDelegate(self)
        .registerCell(UITableViewCell.self)
        .byNoContentInsetAdjustment()
        .bySeparatorStyle(.singleLine)
        .byNoSectionHeaderTopPadding()
    
        .jobs_emptyButtonProvider { [unowned self] in
            UIButton(type: .system)
                .byTitle("æš‚æ— æ•°æ®", for: .normal)
                .bySubTitle("ç‚¹æˆ‘å¡«å……ç¤ºä¾‹æ•°æ®", for: .normal)
                .byImage("tray".sysImg, for: .normal)
                .byImagePlacement(.top)
                .onTap { [weak self] _ in
                    guard let self else { return }
                    self.items = (1...10).map { "Row \($0)" }
                    self.tableView.reloadData()   // âœ… reload åä¼šè‡ªåŠ¨è¯„ä¼°ç©ºæ€ï¼Œæ— éœ€ä½ å†æ‰‹åŠ¨è°ƒç”¨
                }
                // å¯é€‰ï¼šä¸æ»¡æ„é»˜è®¤å±…ä¸­ -> è‡ªå®šä¹‰å¸ƒå±€
                .jobs_setEmptyLayout { btn, make, host in
                    make.centerX.equalTo(host)
                    make.centerY.equalTo(host).offset(-40)
                    make.leading.greaterThanOrEqualTo(host).offset(16)
                    make.trailing.lessThanOrEqualTo(host).inset(16)
                    make.width.lessThanOrEqualTo(host).multipliedBy(0.9)
                }
        }

//            .byContentInset(UIEdgeInsets(
//                top: UIApplication.jobsSafeTopInset + 30,
//                left: 0,
//                bottom: 0,
//                right: 0
//            ))
        // ä¸‹æ‹‰åˆ·æ–° Header
        .configRefreshHeader(component: JobsDefaultHeader(),
                             container: self,
                             trigger: 66) { [weak self] in
            guard let self else { return }
            Task { @MainActor in
                try? await Task.sleep(nanoseconds: 1_000_000_000)
                self.rows = 20
                self.tableView.byReloadData()
                self.tableView.switchRefreshHeader(to: .normal)
                self.tableView.switchRefreshFooter(to: .normal) // å¤ä½â€œæ— æ›´å¤šâ€
            }
        }
        // ä¸Šæ‹‰åŠ è½½ Footer
        .configRefreshFooter(component: JobsDefaultFooter(),
                                      container: self,
                                      trigger: 66) { [weak self] in
            guard let self else { return }
            Task { @MainActor in
                try? await Task.sleep(nanoseconds: 1_000_000_000)
                if self.rows < 60 {
                    self.rows += 20
                    self.tableView.byReloadData()
                    self.tableView.switchRefreshFooter(to: .normal)
                } else {
                    self.tableView.switchRefreshFooter(to: .noMoreData)
                }
            }
        }

        .byAddTo(view) {[unowned self] make in
            if view.jobs_hasVisibleTopBar() {
                make.top.equalTo(self.gk_navigationBar.snp.bottom).offset(10)
                make.left.right.bottom.equalToSuperview()
            } else {
                make.edges.equalToSuperview()
            }
        }
}()
```

#### 2.10ã€å¯¹`UILabel`çš„å°è£…

![image-20251206154144371](./assets/image-20251206154144371.png)

#### 2.11ã€å¯¹`UIScrollView`çš„å°è£…

![image-20251206154233914](./assets/image-20251206154233914.png)

#### 2.12ã€<font id=UIAlertController>å¯¹`UIAlertController`çš„å°è£…</font>

* æœ€ç®€å•çš„ Alert

  ```swift
  private lazy var simpleAlert: UIAlertController = {
      UIAlertController
          .makeAlert("æç¤º", "è¿™æ˜¯ä¸€æ¡ç®€å•æç¤º")
          .byAddCancel { [weak self] _ in
              guard let self else { return }
              print("Cancel")
              // TODO: è¿™é‡Œå†™ä½ çš„å–æ¶ˆé€»è¾‘
          }
          .byAddOK { [weak self] _ in
              guard let self else { return }
              print("OK")
              // TODO: è¿™é‡Œå†™ä½ çš„ç¡®è®¤é€»è¾‘
          }
  }()
  ```

* ```swift
  private lazy var simpleAlert: UIAlertController = {
      UIAlertController
          .makeAlert("é‡å‘½å", "è¯·è¾“å…¥æ–°çš„åç§°")
  //        .bySDBgImageView("https://picsum.photos/800/600",
  //                         image: "å”è€é¸­".img,
  //                         hideSystemBackdrop: true)
  //        .byKFBgImageView("https://picsum.photos/800/600",
  //                         image: "å”è€é¸­".img,
  //                         hideSystemBackdrop: true)
          .byBgImage("å”è€é¸­".img)                      // æœ¬åœ°å›¾èƒŒæ™¯ï¼ˆåŒæ­¥é˜¶æ®µï¼Œæ— åŠ¨ç”»ï¼‰
          .byCardBorder(width: 1, color: .systemBlue)   // å¤–å±‚å¡ç‰‡æè¾¹
          .byAddTextField(placeholder: "æ–°åç§°",
                          borderWidth: nil,             // â† ä¸ç»™ tf è‡ªèº«æè¾¹
                          borderColor: nil,
                          cornerRadius: 8) { alert, tf, input, oldText, isDeleting in
              let ok = alert.actions.first { $0.title == "ç¡®å®š" }
              ok?.isEnabled = !(tf.text ?? "").trimmingCharacters(in: .whitespacesAndNewlines).isEmpty
          }
          .byTextFieldOuterBorder(at: 0,
                                  width: 1,
                                  color: .systemBlue,
                                  cornerRadius: 10,
                                  insets: .init(top: 6, left: 12, bottom: 6, right: 12)) // â† ç»™ç°è‰²å®¹å™¨æè¾¹
          .byAddCancel { _ in                          // âœ… ä¸€ä¸ªå›è°ƒï¼ˆåªç»™ actionï¼‰
              print("Cancel tapped")
          }
          .byAddOK{ alert, _ in                 // éœ€è¦ alert + action çš„å›è°ƒ
              let name = alert.textField(at: 0)?.text ?? ""
              print("new name =", name)
          }
          .byTintColor(.systemBlue)
          .byPresent(self)
  }()
  ```

* ```swift
  private lazy var simpleAlert: UIAlertController = {
      UIAlertController
          .makeActionSheet("é€‰æ‹©æ¥æº", nil)
          .byAddAction(title: "ç›¸æœº") { _ in
              print("camera")
          }
          .byAddAction(title: "ç›¸å†Œ") { _ in
              print("photos")
          }
          .byAddCancel { _ in
              print("Cancel tapped")
          }
          .byPresent(self)
  }()
  ```

* ```swift
  private lazy var simpleAlert: UIAlertController = {
      UIAlertController
          .makeActionSheet("æ“ä½œ", nil)
          .byAddDestructive("åˆ é™¤") { _ in
              print("delete")
          }
          .byAddCancel { _ in
              print("Cancel tapped")
          }
          .byPresent(self, anchor: .view(sender, sender.bounds)) // æŒ‡å®šé”šç‚¹
  }()
  ```

#### 2.13ã€å¯¹`WebView`çš„å°è£…

* `registerMobileAction`åçš„åå­—å³ä¸ºå’Œå‰ç«¯è”è°ƒå¯¹å‡†çš„æ–¹æ³•å

  ```swift
  private lazy var web: BaseWebView = { [unowned self] in
          return BaseWebView()
              .byBgColor(.clear)
              .byAllowedHosts([])                  // ä¸é™åŸŸ
              .byOpenBlankInPlace(true)
              .byDisableSelectionAndCallout(false)
              .byUserAgentSuffixProvider { _ in
                  // æŒ‰è¯·æ±‚åŠ¨æ€è¿½åŠ  UA åç¼€ï¼›nil = ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ UAã€‚
                  // éœ€è¦åŒºåˆ†é¡µé¢æ—¶åœ¨æ­¤ return "YourApp/1.0"
                  return nil
              }
  //            .byNormalizeMToWWW(false)               // â—ï¸å…³é—­ mâ†’www
  //            .byForceHTTPSUpgrade(false)             // â—ï¸å…³é—­ httpâ†’https
  //            .bySafariFallbackOnHTTP(false)          // â—ï¸å…³é—­ Safari å…œåº•
  //            .byInjectRedirectSanitizerJS(false)     // å¯å…³ï¼Œé¿å…å¹²æ¶‰ H5 è‡ªå·±è·³è½¬
              /// URL é‡å†™ç­–ç•¥ï¼ˆé»˜è®¤ä¸é‡å†™ï¼›è¿™é‡Œä¿æŒå…³é—­ï¼‰
              .byURLRewriter { _ in
                  // ä¾‹å¦‚è¦åš httpâ†’https å‡çº§ï¼šæ£€æµ‹ url.scheme == "http" å†è¿”å›æ–° URL
                  // ç°åœ¨è¿”å› nil è¡¨ç¤ºä¸æ”¹å†™
                  return nil
              }
              /// Safari å…œåº•ï¼ˆé»˜è®¤ä¸å¼€ï¼‰ï¼›è¿”å› true å³äº¤ç»™ Safari æ‰“å¼€
              .bySafariFallbackRule { _ in
                  return false
              }
              /// ä¸€é”®å¼€å¯¼èˆªæ ï¼ˆé»˜è®¤æ ‡é¢˜=webView.titleï¼Œé»˜è®¤æœ‰è¿”å›é”®ï¼‰
              .byNavBarEnabled(true)
              .byNavBarStyle { s in
                  s.byHairlineHidden(false)
                   .byBackgroundColor(.systemBackground)
                   .byTitleAlignmentCenter(true)
              }
              /// è‡ªå®šä¹‰è¿”å›é”®ï¼ˆæƒ³éšè—å°±ï¼š.byNavBarBackButtonProvider { nil }ï¼‰
              .byNavBarBackButtonProvider {
                  UIButton(type: .system)
                      .byBackgroundColor(.clear)
                      .byImage(UIImage(systemName: "chevron.left"), for: .normal)
                      .byTitle("è¿”å›", for: .normal)
                      .byTitleFont(.systemFont(ofSize: 16, weight: .medium))
                      .byTitleColor(.label, for: .normal)
                      .byContentEdgeInsets(.init(top: 6, left: 10, bottom: 6, right: 10))
                      .byTapSound("Sound.wav")
              }
              /// è¿”å›è¡Œä¸ºï¼šä¼˜å…ˆåé€€ï¼Œå¦åˆ™å…³é—­å½“å‰æ§åˆ¶å™¨
              .byNavBarOnBack { [weak self] in
                  guard let self else { return }
                  closeByResult("")
              }
              .byAddTo(view) { [unowned self] make in
                  make.edges.equalToSuperview()
              }
              /// ä»¥ä¸‹æ˜¯ä¾æ®å‰ç«¯æš´éœ²çš„è‡ªå®šä¹‰æ–¹æ³•è¿›è¡Œçš„JSäº¤äº’
              .registerMobileAction("navigateToHome") {  [weak self] body, reply in
                  /// è·³è½¬åˆ°é¦–é¡µ
                  self!.closeByResult("")
                  reply(nil)
              }
              .registerMobileAction("getToken") {  [weak self] body, reply in
  
                  reply(nil)
              }
              .registerMobileAction("navigateToSecurityCenter") {  [weak self] body, reply in
                  /// è·³è½¬ç¦åˆ©ä¸­å¿ƒ
                  reply(nil)
              }
              .registerMobileAction("navigateToLogin") {  [weak self] body, reply in
                  /// è·³è½¬åˆ°ç™»å½•é¡µ
                  reply(nil)
              }
              .registerMobileAction("navigateToDeposit") {  [weak self] body, reply in
                  /// è·³è½¬åˆ°å……å€¼é¡µ
                  reply(nil)
              }
              .registerMobileAction("closeWebView") {  [weak self] body, reply in
                  /// å…³é—­WebView
                  reply(nil)
              }
              .registerMobileAction("showToast") {  [weak self] body, reply in
                  /// æ˜¾ç¤ºToast
                  JobsToast.show(
                      text: body.stringValue(for: "message") ?? "",
                      config: JobsToast.Config()
                          .byBgColor(.systemGreen.withAlphaComponent(0.9))
                          .byCornerRadius(12)
                  )
                  reply(nil)
              }
  }()
  ```

* ä¸€èˆ¬çš„**WKWebView**ï¼Œåªå…³å¿ƒä¸€èˆ¬çš„æ˜¾ç¤ºï¼Œä¸åšè¿‡å¤šçš„äº¤äº’å¤„ç†

  ```swift
  import WebKit
  
  private lazy var webView: WKWebView = {
      WKWebView(frame: .zero, configuration: WKWebViewConfiguration()
          .byWebsiteDataStore(.default())
          .byAllowsInlineMediaPlayback(true)
          .byUserContentController(WKUserContentController().byAddUserScript(Self.makeBridgeUserScript()))
          .byDefaultWebpagePreferences { wp in
              wp.allowsContentJavaScript = true
          }
      )
      .byAddTo(view) { [unowned self] make in
          make.top.equalTo(textField.snp.bottom).offset(12)
          make.centerX.equalToSuperview()
          make.height.equalTo(36)
      }
  }()
  ```

#### 2.14ã€å¯¹è®¡æ—¶å™¨çš„å°è£…`JobsTimer`

> ```
> JobsSwiftBaseTools.JobsTimer
> ```

<div>
  <img src="./assets/image-20251206163415432.png" width="45%" />
  <img src="./assets/image-20251206163504503.png" width="45%" />
</div>

```swift
JobsTimerFactory.make(kind: .displayLink,
                      config: JobsTimerConfig(interval: 1, repeats: true, tolerance: 0.002, queue: .main)) {
    ///  æ—¥æœŸæ‰“å°
    print(Date().formatted(date: .numeric, time: .standard))
}.start()
```

* iOSç³»ç»Ÿä¸­å­˜åœ¨ä¸‰å¤§è®¡æ—¶å™¨æ ¸å¿ƒï¼Œåˆ†åˆ«æ˜¯ï¼š**NSTimer** / **GCD** / **CADisplayLink**ã€‚å…¶é—´çš„å·®å¼‚åœ¨äºç²¾ç¡®ç²’åº¦çš„åŒºåˆ«ï¼Œåœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹éƒ½æ— å·®åˆ«ï¼Œé™¤éåœ¨ç‰¹å®šåœºæ™¯ä¸‹æ‰ä¼šæœ‰åˆ†åˆ«
* åœ¨æ•æ·å¼€å‘çš„åŸºç¡€ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒä¸šåŠ¡å±‚ï¼Œè€Œä¸å–„äºå…³å¿ƒåˆ›å»ºæµç¨‹ï¼ˆæœŸæœ›å¿«é€Ÿä¸€é”®åˆ›å»ºï¼‰ï¼Œè€Œååç³»ç»Ÿçš„åˆ›å»ºæµç¨‹è¾ƒä¸ºå¤æ‚ã€‚å…¶éš¾ç‚¹åœ¨äºè®¡æ—¶å™¨çš„é”€æ¯åœ¨ä¸ç»æ„ä¹‹é—´å¯èƒ½ä¼šå¼•èµ·å¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œé€ æˆé¡µé¢çš„ä¸é‡Šæ”¾ï¼Œå¯¼è‡´å†…å­˜æ³„éœ²æˆ–è€…è¿›æ•°æ®å¼‚å¸¸
* å¦‚æœæ˜¯é¢å‘ä¸šåŠ¡å¼€å‘ï¼Œç¨‹åºå‘˜å…¶å®æœ€å…³å¿ƒçš„ï¼Œæ˜¯è®¡æ—¶å™¨å‘å¤–æŠ›å‡ºçš„4ï½5ç§çŠ¶æ€ï¼ˆç”¨åè®®çš„æ–¹å¼å¯¹å¤–æš´éœ²ï¼‰ã€‚åˆ†åˆ«æ˜¯ï¼šï¼ˆç»“æŸæœ‰2ç§å½¢æ€ï¼Œå…¶ä¸­ä¸€ç§ç»“æŸæ—¶éœ€è¦æ‰§è¡Œä¸€æ®µæ“ä½œï¼‰
  * å¯åŠ¨è®¡æ—¶å™¨  `func start()`
  * æš‚åœè®¡æ—¶å™¨  `func pause()`
  * æ¢å¤è®¡æ—¶å™¨  `func resume()`
  * åœæ­¢è®¡æ—¶å™¨ï¼ˆé”€æ¯@æœ‰å›è°ƒï¼‰`func fireOnce()`
  * åœæ­¢è®¡æ—¶å™¨ï¼ˆé”€æ¯@æ— å›è°ƒï¼‰` func stop()`
* ç›¸è¾ƒäº[**YYKit**](https://github.com/ibireme/YYKit)å¸¦çš„è®¡æ—¶å™¨
  * **YYTimer**æ˜¯ä¸€ä¸ªçº¯OCçš„åº“
  * **YYTimer**åªæ˜¯ä¸€ä¸ªè®¡æ—¶å™¨çš„æœ€ä½³å®è·µï¼šå¤šç§å®šæ—¶å™¨ç»„åˆå‡ºæ¥çš„ä¸€ä¸ªè®¡æ—¶å™¨æ¨¡å—
  * æˆ‘ä¸ªäººè®¤ä¸ºè¿˜æ˜¯éœ€è¦æŠŠä½¿ç”¨æ–¹å¼æš´éœ²ç»™ç”¨æˆ·ï¼Œè®©ç”¨æˆ·è‡ªå·±å»å®šä¹‰
    * ä½¿ç”¨ä½•ç§è®¡æ—¶å™¨æ ¸å¿ƒ
    * æ­¥é¢‘
    * äº‹ä»¶å›è°ƒï¼ˆè¿è¡Œä¸­ã€ç»“æŸé‚£ä¸€åˆ»ï¼‰
    * æ˜¯å¦æ˜¯æ­£è®¡æ—¶/æ˜¯å¦æ˜¯å€’è®¡æ—¶
    * ã€‚ã€‚ã€‚

##### 2.14.1ã€å€’è®¡æ—¶æŒ‰é’®

```swift
// MARK: - å€’è®¡æ—¶æ¼”ç¤ºæŒ‰é’®ï¼ˆåŒä¸€å¥— APIï¼šä¼  total => å€’è®¡æ—¶ï¼‰
private lazy var countdownButton: UIButton = {
    UIButton.sys()
        .byTitle("è·å–éªŒè¯ç ", for: .normal)
        .byTitleColor(.white, for: .normal)
        .byBackgroundColor(.systemGreen, for: .normal)
        .onCountdownTick { [weak self] btn, remain, total, kind in
            guard let self else { return }
            print("â±ï¸ [\(kind.jobs_displayName)] \(remain)/\(total)")
            self.lastFireLabel.text = "Last: " + Self.fmt(Date())
            btn.byTitle("è¿˜å‰© \(remain)s", for: .normal)
        }
        .onCountdownFinish { _, kind in
            print("âœ… [\(kind.jobs_displayName)] å€’è®¡æ—¶å®Œæˆ")
        }
        .onTap { [weak self] btn in
            guard let self else { return }
            let total = self.parseCountdownTotal(10)
            btn.startTimer(
                total: total, // â¤ï¸ ä¼  total => å€’è®¡æ—¶
                interval: self.intervalSec,
                kind: self.currentKind
            )
            // å…³é”®ï¼šç­‰ startTimer æŠŠ "10s" è®¾å¥½åå†åŠ å‰ç¼€ï¼Œé¿å…è¢«è¦†ç›–
            DispatchQueue.main.async {
                let cur = btn.title(for: .normal) ?? "\(total)s"
                if !cur.hasPrefix("è¿˜å‰© ") {
                    btn.byTitle("è¿˜å‰© \(cur)", for: .normal)
                }
            }
        }
        .byAddTo(view) { [unowned self] make in
            make.top.equalTo(self.hintLabel.snp.bottom).offset(20)
            make.left.equalToSuperview().offset(horizontalInset)
            make.right.equalToSuperview().inset(horizontalInset)
            make.height.equalTo(50)
        }
}()
```

##### 2.14.2ã€è·‘é©¬ç¯ï¼ˆå®é™…å±•ç°çš„æ§ä»¶æ˜¯æŒ‰é’®ï¼‰

```swift
// MARK: - 1. å‘ä¸Šè¿ç»­æ»šåŠ¨
private lazy var upContinuousMarquee: JobsMarqueeView = { [unowned self] in
    JobsMarqueeView()
        .byDirection(.up)
        .byScrollMode(.continuous(speed: 40))
        .byItemSizeMode(.fitContent)   // å…¸å‹å…¬å‘Šè·‘é©¬ç¯
        .byDataSourceButtons([
            UIButton.sys()
                .byBackgroundColor(.systemYellow.withAlphaComponent(0.2), for: .normal)
                .byTitle("å‘ä¸Šè¿ç»­ Â· å…¬å‘Š 1", for: .normal)
                .byTitleColor(.label, for: .normal)
                .byTitleFont(.systemFont(ofSize: 14, weight: .medium))
                .bySubTitle("æ›´å¤šå†…å®¹ 1", for: .normal)
                .bySubTitleColor(.secondaryLabel, for: .normal)
                .bySubTitleFont(.systemFont(ofSize: 11, weight: .regular))
                .byImage("megaphone.fill".sysImg, for: .normal)
                .byContentEdgeInsets(UIEdgeInsets(top: 4, left: 8, bottom: 4, right: 8))
                .byTitleEdgeInsets(UIEdgeInsets(top: 0, left: 6, bottom: 0, right: -6))
                .byTapSound("Sound.wav")
                .onTap { sender in
                    print("ğŸ”” å‘ä¸Šè¿ç»­ Â· å…¬å‘Š 1 tapped, selected=\(sender.isSelected)")
                    toastBy(sender.title!)
                }
                .onLongPress(minimumPressDuration: 0.8) { btn, gr in
                    if gr.state == .began {
                        btn.alpha = 0.6
                        print("é•¿æŒ‰å¼€å§‹ on \(btn)")
                    } else if gr.state == .ended || gr.state == .cancelled {
                        btn.alpha = 1.0
                        print("é•¿æŒ‰ç»“æŸ")
                    }
                },
            UIButton.sys()
                .byBackgroundColor(.systemYellow.withAlphaComponent(0.2), for: .normal)
                .byTitle("å‘ä¸Šè¿ç»­ Â· å…¬å‘Š 2", for: .normal)
                .byTitleColor(.label, for: .normal)
                .byTitleFont(.systemFont(ofSize: 14, weight: .medium))
                .bySubTitle("æ›´å¤šå†…å®¹ 2", for: .normal)
                .bySubTitleColor(.secondaryLabel, for: .normal)
                .bySubTitleFont(.systemFont(ofSize: 11, weight: .regular))
                .byImage("megaphone.fill".sysImg, for: .normal)
                .byContentEdgeInsets(UIEdgeInsets(top: 4, left: 8, bottom: 4, right: 8))
                .byTitleEdgeInsets(UIEdgeInsets(top: 0, left: 6, bottom: 0, right: -6))
                .byTapSound("Sound.wav")
                .onTap { sender in
                    print("ğŸ”” å‘ä¸Šè¿ç»­ Â· å…¬å‘Š 2 tapped, selected=\(sender.isSelected)")
                    toastBy(sender.title!)
                }
                .onLongPress(minimumPressDuration: 0.8) { btn, gr in
                    if gr.state == .began {
                        btn.alpha = 0.6
                        print("é•¿æŒ‰å¼€å§‹ on \(btn)")
                    } else if gr.state == .ended || gr.state == .cancelled {
                        btn.alpha = 1.0
                        print("é•¿æŒ‰ç»“æŸ")
                    }
                },
            UIButton.sys()
                .byBackgroundColor(.systemYellow.withAlphaComponent(0.2), for: .normal)
                .byTitle("å‘ä¸Šè¿ç»­ Â· å…¬å‘Š 3", for: .normal)
                .byTitleColor(.label, for: .normal)
                .byTitleFont(.systemFont(ofSize: 14, weight: .medium))
                .bySubTitle("æ›´å¤šå†…å®¹ 3", for: .normal)
                .bySubTitleColor(.secondaryLabel, for: .normal)
                .bySubTitleFont(.systemFont(ofSize: 11, weight: .regular))
                .byImage("megaphone.fill".sysImg, for: .normal)
                .byContentEdgeInsets(UIEdgeInsets(top: 4, left: 8, bottom: 4, right: 8))
                .byTitleEdgeInsets(UIEdgeInsets(top: 0, left: 6, bottom: 0, right: -6))
                .byTapSound("Sound.wav")
                .onTap { sender in
                    print("ğŸ”” å‘ä¸Šè¿ç»­ Â· å…¬å‘Š 3 tapped, selected=\(sender.isSelected)")
                    toastBy(sender.title!)
                }
                .onLongPress(minimumPressDuration: 0.8) { btn, gr in
                    if gr.state == .began {
                        btn.alpha = 0.6
                        print("é•¿æŒ‰å¼€å§‹ on \(btn)")
                    } else if gr.state == .ended || gr.state == .cancelled {
                        btn.alpha = 1.0
                        print("é•¿æŒ‰ç»“æŸ")
                    }
                }
        ])
        .byBgColor(.randomColor)
        .byAddTo(self.scrollView) { [unowned self] make in
            if #available(iOS 11.0, *) {
                make.top.equalTo(self.scrollView.contentLayoutGuide.snp.top).offset(10)
                make.left.equalTo(self.scrollView.frameLayoutGuide.snp.left).offset(self.horizontalInset)
                make.right.equalTo(self.scrollView.frameLayoutGuide.snp.right).inset(self.horizontalInset)
            } else {
                make.top.equalTo(self.scrollView.snp.top).offset(10)
                make.left.equalTo(self.scrollView).offset(self.horizontalInset)
                make.right.equalTo(self.scrollView).inset(self.horizontalInset)
            }
            make.height.equalTo(self.marqueeHeight)
        }
}()
```

##### 2.14.3ã€è½®æ’­å›¾ï¼ˆå®é™…å±•ç°çš„æ§ä»¶æ˜¯æŒ‰é’®ï¼‰

```swift
// MARK: - 13. Kingfisher@èƒŒæ™¯å›¾
private lazy var kingfisherImageButtonsMarquee: JobsMarqueeView = { [unowned self] in
    JobsMarqueeView()
        .byDirection(.left)
        .byScrollMode(.frequency(interval: 1.0))
        .byItemSizeMode(.fillBounds)
        .byDataSourceButtons ([
            UIButton.sys()
                .byTitle("æˆ‘æ˜¯UIButtonä¸»æ ‡é¢˜@Kingfisher").byTitleColor(.red)
                .bySubTitle("æˆ‘æ˜¯UIButtonå‰¯æ ‡é¢˜@Kingfisher").bySubTitleColor(.yellow)
                .kf_imageURL("https://picsum.photos/" + ScreenWidth().toString(0) + "/" + self.marqueeHeight.toString(0))
                .kf_placeholderImage("å”è€é¸­".img)
                .kf_options([
                    .processor(DownsamplingImageProcessor(size: CGSize(width: 500, height: 200))),
                    .scaleFactor(UIScreen.main.scale),
                    .cacheOriginalImage,
                    .transition(.fade(0.25)),
                    .retryStrategy(DelayRetryStrategy(maxRetryCount: 2, retryInterval: .seconds(1)))
                ])
                .kf_bgNormalLoad()// ä¹‹å‰æ˜¯é…ç½®é¡¹ï¼Œè¿™é‡Œæ‰æ˜¯çœŸæ­£å†³å®šæ¸²æŸ“èƒŒæ™¯å›¾/å‰æ™¯å›¾
                .byTapSound("Sound.wav")
                .onTap { sender in
                    print("ğŸ”´ Kingfisher@èƒŒæ™¯å›¾ 1 tapped, selected=\(sender.isSelected)")
                    toastBy("ç‚¹å‡»äº†Kingfisher@èƒŒæ™¯å›¾")
                }
                .onLongPress(minimumPressDuration: 0.8) { btn, gr in
                    if gr.state == .began {
                        btn.alpha = 0.6
                        print("é•¿æŒ‰å¼€å§‹ on \(btn)")
                    } else if gr.state == .ended || gr.state == .cancelled {
                        btn.alpha = 1.0
                        print("é•¿æŒ‰ç»“æŸ")
                    }
                },
            UIButton.sys()
                .byTitle("æˆ‘æ˜¯UIButtonä¸»æ ‡é¢˜@Kingfisher").byTitleColor(.red)
                .bySubTitle("æˆ‘æ˜¯UIButtonå‰¯æ ‡é¢˜@Kingfisher").bySubTitleColor(.yellow)
                .kf_imageURL("https://picsum.photos/" + ScreenWidth().toString(0) + "/" + self.marqueeHeight.toString(0))
                .kf_placeholderImage("å”è€é¸­".img)
                .kf_options([
                    .processor(DownsamplingImageProcessor(size: CGSize(width: 500, height: 200))),
                    .scaleFactor(UIScreen.main.scale),
                    .cacheOriginalImage,
                    .transition(.fade(0.25)),
                    .retryStrategy(DelayRetryStrategy(maxRetryCount: 2, retryInterval: .seconds(1)))
                ])
                .kf_bgNormalLoad()// ä¹‹å‰æ˜¯é…ç½®é¡¹ï¼Œè¿™é‡Œæ‰æ˜¯çœŸæ­£å†³å®šæ¸²æŸ“èƒŒæ™¯å›¾/å‰æ™¯å›¾
                .byTapSound("Sound.wav")
                .onTap { sender in
                    print("ğŸ”´ Kingfisher@èƒŒæ™¯å›¾ 2 tapped, selected=\(sender.isSelected)")
                    toastBy("ç‚¹å‡»äº†Kingfisher@èƒŒæ™¯å›¾")
                }
                .onLongPress(minimumPressDuration: 0.8) { btn, gr in
                    if gr.state == .began {
                        btn.alpha = 0.6
                        print("é•¿æŒ‰å¼€å§‹ on \(btn)")
                    } else if gr.state == .ended || gr.state == .cancelled {
                        btn.alpha = 1.0
                        print("é•¿æŒ‰ç»“æŸ")
                    }
                },
            UIButton.sys()
                .byTitle("æˆ‘æ˜¯UIButtonä¸»æ ‡é¢˜@Kingfisher").byTitleColor(.red)
                .bySubTitle("æˆ‘æ˜¯UIButtonå‰¯æ ‡é¢˜@Kingfisher").bySubTitleColor(.yellow)
                .kf_imageURL("https://picsum.photos/" + ScreenWidth().toString(0) + "/" + self.marqueeHeight.toString(0))
                .kf_placeholderImage("å”è€é¸­".img)
                .kf_options([
                    .processor(DownsamplingImageProcessor(size: CGSize(width: 500, height: 200))),
                    .scaleFactor(UIScreen.main.scale),
                    .cacheOriginalImage,
                    .transition(.fade(0.25)),
                    .retryStrategy(DelayRetryStrategy(maxRetryCount: 2, retryInterval: .seconds(1)))
                ])
                .kf_bgNormalLoad()// ä¹‹å‰æ˜¯é…ç½®é¡¹ï¼Œè¿™é‡Œæ‰æ˜¯çœŸæ­£å†³å®šæ¸²æŸ“èƒŒæ™¯å›¾/å‰æ™¯å›¾
                .byTapSound("Sound.wav")
                .onTap { sender in
                    print("ğŸ”´ Kingfisher@èƒŒæ™¯å›¾ 3 tapped, selected=\(sender.isSelected)")
                    toastBy("ç‚¹å‡»äº†Kingfisher@èƒŒæ™¯å›¾")
                }
                .onLongPress(minimumPressDuration: 0.8) { btn, gr in
                    if gr.state == .began {
                        btn.alpha = 0.6
                        print("é•¿æŒ‰å¼€å§‹ on \(btn)")
                    } else if gr.state == .ended || gr.state == .cancelled {
                        btn.alpha = 1.0
                        print("é•¿æŒ‰ç»“æŸ")
                    }
                },
        ])
        .byBgColor(.randomColor)
        .byAddTo(self.scrollView) { [unowned self] make in
            make.top.equalTo(self.sdWebImageButtonsMarquee.snp.bottom).offset(self.verticalSpacing)
            make.left.right.height.equalTo(self.upContinuousMarquee)
            // ğŸ”š æœ€åä¸€æ¡å°åº•ï¼Œå†³å®š scrollView.contentSize.height
            if #available(iOS 11.0, *) {
                make.bottom.equalTo(self.scrollView.contentLayoutGuide.snp.bottom).inset(20)
            } else {
                make.bottom.equalTo(self.scrollView.snp.bottom).inset(20)
            }
        }
}()
```

#### 2.16ã€é›ªèŠ±ç®—æ³•çš„[**Swift**](https://www.swift.org/)å®è·µ

```swift
SnowflakeSwift(IDCID: 4, machineID: 30).nextID() 
```

#### 2.17ã€å¯¹å­—ç¬¦ä¸²çš„å°è£…

##### 2.17.1ã€å¤šè¯­è¨€åŒ–

```swift
"ğŸ”‘ æ³¨å†Œç™»å½•".tr
```

##### 2.17.2ã€é€šç”¨æ ¼å¼çš„è½¬æ¢ 

```swift
 "123".toInt()   
 // âœ… è¾“å‡ºï¼š123
 // ğŸ“˜ è¯´æ˜ï¼šå°†å­—ç¬¦ä¸²è½¬ä¸º Intï¼Œå¦‚æœåŒ…å«éæ•°å­—å­—ç¬¦åˆ™è¿”å› nil
 
 "9876543210".toInt64()   
 // âœ… è¾“å‡ºï¼š9876543210
 // ğŸ“˜ è¯´æ˜ï¼šé€‚ç”¨äºè¶…å‡º Int èŒƒå›´çš„å¤§æ•´æ•°
 
 "3.14159".toDouble()   
 // âœ… è¾“å‡ºï¼š3.14159
 // ğŸ“˜ è¯´æ˜ï¼šæ”¯æŒå°æ•°ç‚¹ä¸åƒåˆ†ä½ï¼ˆå¦‚ "1,234.56" â†’ 1234.56ï¼‰
 
 "3.1".toDouble(2, 2)   
 // âœ… è¾“å‡ºï¼š3.10
 // ğŸ“˜ è¯´æ˜ï¼šé™åˆ¶æœ€å¤š 2 ä½å°æ•°ï¼Œæœ€å°‘ä¹Ÿæ˜¾ç¤º 2 ä½ï¼ˆè‡ªåŠ¨è¡¥é›¶ï¼‰
 
 "123.45".toFloat()   
 // âœ… è¾“å‡ºï¼š123.45
 // ğŸ“˜ è¯´æ˜ï¼šæµ®ç‚¹æ•°ç‰ˆæœ¬ï¼ˆç²¾åº¦ç•¥ä½äº Doubleï¼‰
 
 "true".toBool()     // âœ… true
 "False".toBool()    // âœ… false
 "YES".toBool()      // âœ… true
 "no".toBool()       // âœ… false
 "1".toBool()        // âœ… true
 "0".toBool()        // âœ… false
 "maybe".toBool()    // âŒ nilï¼ˆæ— æ³•è¯†åˆ«ï¼‰
 // ğŸ“˜ è¯´æ˜ï¼šå¤§å°å†™ä¸æ•æ„Ÿ
 
 "ä½ å¥½".toNSString   
 // âœ… è¾“å‡ºï¼šNSString("ä½ å¥½")
 // ğŸ“˜ è¯´æ˜ï¼šSwift String è½¬ Foundation NSString
 
 "Hello".rich   
 // âœ… è¾“å‡ºï¼šNSAttributedString("Hello")
 // ğŸ“˜ è¯´æ˜ï¼šå°†æ™®é€šå­—ç¬¦ä¸²è½¬ä¸ºå¯Œæ–‡æœ¬ï¼ˆæ— æ ·å¼ï¼‰
 
 "çº¢è‰²åŠ ç²—".rich([
     .foregroundColor: UIColor.red,
     .font: UIFont.boldSystemFont(ofSize: 18)
 ])
 // âœ… è¾“å‡ºï¼šçº¢è‰²åŠ ç²—ï¼ˆå¯Œæ–‡æœ¬æ ·å¼ï¼‰
 // ğŸ“˜ è¯´æ˜ï¼šé™„åŠ å­—ä½“ä¸é¢œè‰²å±æ€§
```

##### 2.17.3ã€å­—ç¬¦ä¸²åŠ è½½å›¾ç‰‡èµ„æº

* å–æœ¬åœ°å›¾ç‰‡

  ```swift
  /// æœ¬åœ°å›¾åƒåï¼ˆåœ¨ Assets ä¸­æ”¾ä¸€å¼ å« "Ani" çš„å›¾ï¼‰
  localImageView.image = "Ani".img
  ```

* å–ç½‘ç»œå›¾ç‰‡@[**Kingfisher**](https://github.com/onevcat/Kingfisher) 

  ```swift
  /// UIImageViewå­—ç¬¦ä¸²ç½‘ç»œå›¾@Kingfisher
  private lazy var asyncImgView: UIImageView = {
      let imageView = UIImageView()
          .byContentMode(.scaleAspectFill)
          .byClipsToBounds()
          .byAddTo(scrollView) { [unowned self] make in
              make.top.equalTo(localImgView.snp.bottom).offset(20)
              make.left.equalTo(scrollView.frameLayoutGuide.snp.left).offset(20)
              make.right.equalTo(scrollView.frameLayoutGuide.snp.right).inset(20)
              make.height.equalTo(180)
          }
      Task {
          do {
              imageView.byImage(try await "https://picsum.photos/200/300".kfLoadImage())
              print("âœ… åŠ è½½æˆåŠŸ (KF async)")
          } catch {
              print("âŒ åŠ è½½å¤±è´¥ (KF async)ï¼š\(error)")
          }
      }
      return imageView
  }()
  ```

  ```swift
  /// UIImageViewç½‘ç»œå›¾ï¼ˆå¤±è´¥å…œåº•å›¾ï¼‰@Kingfisher
  private lazy var wrapperImgView: UIImageView = {
      UIImageView()
          .byContentMode(.scaleAspectFill)
          .byClipsToBounds()
          .kf_setImage(from: "https://picsum.photos/200", placeholder: "Ani".img)
          .byAddTo(scrollView) { [unowned self] make in
              make.top.equalTo(asyncImgViewSD.snp.bottom).offset(20)
              make.left.equalTo(scrollView.frameLayoutGuide.snp.left).offset(20)
              make.right.equalTo(scrollView.frameLayoutGuide.snp.right).inset(20)
              make.height.equalTo(180)
          }
  }()
  ```

##### 2.17.4ã€å­—ç¬¦ä¸²æ‰“å¼€

* æ‰“å¼€ç½‘ç«™ / **`Scheme`**ï¼ˆå¸¦å‚ï¼‰

  ```swift
  "www.baidu.com".open()
  "https://example.com/search?q=ä¸­æ–‡ å…³é”®è¯".open()
  ```

* æ‰“ç”µè¯ï¼ˆä»…æ”¯æŒçœŸæœºï¼‰

  ```swift
  "13434343434".call()
  ```

* å‘é‚®ä»¶ï¼ˆå¸¦å‚ï¼‰

  ```swift
  "test@qq.com".mail()
  ```

  ```swift
  "ops@company.com".mail(
      subject: "åé¦ˆ",
      body: "ä½ å¥½ï¼Œé‡åˆ°ä¸€ä¸ªé—®é¢˜..."
  )
  ```

  ```swift
  "a@b.com,c@d.com".mail(
      subject: "æ—¥æŠ¥",
      body: "<b>ä»Šå¤©å®Œæˆï¼š</b><br/>1. xxx<br/>2. yyy",
      isHTML: true,
      cc: ["pm@company.com"],
      bcc: ["boss@company.com"]
  ) { result in
      print("mail result = \(result)")
  }
  ```

##### 2.17.5ã€ğŸ¡ å­—ç¬¦ä¸²å–è‰²ğŸ¨ï¼ˆæ ¡éªŒè§„å®šæ ¼å¼ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```swift
/// æ”¯æŒæ ¼å¼ï¼š
/// "#RRGGBB" / "RRGGBB" / "0xRRGGBB"
/// "#RGB"   / "RGB"
/// "#AARRGGBB" / "AARRGGBB"

"#353a3e".cor          // OK â†’ æ­£å¸¸è‰²
"353a3e".cor           // OK
"0x353a3e".cor         // OK
"#FFF".cor             // OK â†’ å±•å¼€æˆ #FFFFFF
"80FF0000".cor         // OK â†’ alpha=0x80, red
"ä¹±ä¸ƒå…«ç³Ÿ".cor         // âŒ â†’ ç›´æ¥çº¢è‰²

"80FF0000".cor(alpha: 1) // alpha èµ°å­—ç¬¦ä¸²é‡Œçš„ 0x80ï¼Œè€Œä¸æ˜¯ä½ ä¼ çš„ 1
"åƒåœ¾".cor(.black)        // éæ³• â†’ black
```

##### 2.17.6ã€[**å¯¹å…¨å±€æ™®é€šçš„å­—ç¬¦ä¸²è¿›è¡Œå¤šè¯­è¨€å›½é™…åŒ–çš„å¤„ç†**](#å›½é™…åŒ–) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 2.17.7ã€[**å¯Œæ–‡æœ¬**](#å¯Œæ–‡æœ¬) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* æŠŠæ™®é€šå­—ç¬¦ä¸²**å‡æ ¼**ä¸ºå¯Œæ–‡æœ¬å­—ç¬¦ä¸²

  ```swift
  NSAttributedString(string: s)
  ```

* æŠŠå¯Œæ–‡æœ¬å­—ç¬¦ä¸²**é™æ ¼**ä¸ºæ™®é€šå­—ç¬¦ä¸²

  ```swift
  a.string
  ```

##### 2.17.8ã€æ¡å½¢ç  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* `Code128 æ¡å½¢ç `ï¼ˆå¯æŒ‡å®šç›®æ ‡å°ºå¯¸ï¼›è‡ªåŠ¨æ— æ’å€¼æ”¾å¤§ï¼‰

  ```swift
  UIImageView().byImage(barContent.code128BarcodeImage(size: CGSize(width: 260, height: 100)))
  ```

* ç”Ÿæˆå¸¦åº•éƒ¨æ–‡å­—çš„äººç±»å¯è¯» `Code128 æ¡å½¢ç `

  ```swift
  UIImageView().byImage(barContent.code128ByText(width: 260, barHeight: 100))
  ```

##### 2.17.9ã€äºŒç»´ç  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* çº¯äºŒç»´ç ï¼ˆä¸­é—´æ— Logoï¼‰

  ```swift
  UIImageView().byImage(qrContent.qrcodeImage(260))
  ```

* ç”Ÿæˆå¸¦ä¸­å¿ƒ Logo çš„äºŒç»´ç 

  ```swift
  UIImageView().byImage(
      "https://www.google.com".qrcodeImage(
          260,
          correction: "H",
          centerLogo: "Ani".img,
          logoRatio: 0.22,
          logoCornerRadius: 10,
          borderWidth: 6,
          borderColor: .white
      )
  )
  ```

##### 2.17.10ã€è£å‰ª <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* å»æ‰é¦–å°¾ç©ºç™½ / æ¢è¡Œ

  ```swift
  let raw = "  Hello World \n"
  let cleaned = raw.byTrimmed
  print(cleaned)  // "Hello World"
  ```

* è£å‰ªåéç©ºæ‰è¦è¿™ä¸ªå­—ç¬¦ä¸²ï¼ˆå¦åˆ™ç”¨ nilï¼‰

  ```swift
  let input = "   \n  "              // ç”¨æˆ·ä¹±è¾“å…¥çš„ä¸œè¥¿
  let value = input.byTrimmedOrNil  // -> nil
  
  let input2 = "  Jobs  "
  let value2 = input2.byTrimmedOrNil // -> "Jobs"
  ```

* åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯éç©ºçš„ http/https URL

  ```swift
  let urlString = "  https://example.com/path  "
  
  if urlString.isNonEmptyHttpURL {
      print("è¿™æ˜¯ä¸€ä¸ª http(s) URL")
  } else {
      print("ä¸æ˜¯åˆæ³•çš„ http(s) URL å­—ç¬¦ä¸²")
  }
  ```

* åªè¦ http(s) å­—ç¬¦ä¸²ï¼Œå…¶ä»–ä¸€å¾‹å½“ nil

  ```swift
  let input = "  www.example.com  "
  let httpString = input.asHttpURLOrNil   // -> nil
  
  let input2 = "  https://example.com  "
  let httpString2 = input2.asHttpURLOrNil // -> "https://example.com"
  ```

#### 2.18ã€å¯¹ç‚¹å‡»äº‹ä»¶çš„å°è£…

##### 2.18.1ã€å°è£…åœ¨`UIControl` å±‚çš„ç‚¹å‡»äº‹ä»¶

* ```swift
  private lazy var toggle: UISwitch = {
      UISwitch()
          .onJobsChange { (sw: UISwitch) in
              print("å¼€å…³çŠ¶æ€ï¼š\(sw.isOn)")
          }
  }()
  ```

* ```swift
  private lazy var datePicker: UIDatePicker = {
      UIDatePicker()
          .byDatePickerMode(.date)
          .onJobsChange { (picker: UIDatePicker) in
              print("é€‰æ‹©æ—¥æœŸï¼š\(picker.date)")
          }
  }()
  ```

* ```swift
  private lazy var slider: UISlider = {
      UISlider()
          .onJobsChange { (slider: UISlider) in
              print("æ»‘å—å€¼ï¼š\(slider.value)")
          }
  }()
  ```

* ```swift
  private lazy var textField: UITextField = {
      UITextField()
          .onJobsEvent(.editingChanged) { (tf: UITextField) in
              print("æ–‡å­—å˜åŒ–ï¼š\(tf.text ?? "")")
          }
  }()
  ```

* ```swift
  private lazy var kindSeg: UISegmentedControl = {
      UISegmentedControl(items: ["Foundation", "GCD", "DisplayLink", "RunLoopCore"])
          .bySelectedSegmentIndex(0)
          .byAddTo(view) { [unowned self] make in
              make.top.equalTo(self.view.safeAreaLayoutGuide.snp.top).offset(16)
              make.left.right.equalToSuperview().inset(16)
              make.height.equalTo(34)
          }
          .onJobsChange { [weak self] (_: UISegmentedControl) in
              self?.onKindChanged()
          }
  }()
  ```

##### 2.18.2ã€**å°è£…åœ¨`UIButton` å±‚çš„ç‚¹å‡»äº‹ä»¶**

```swift
let button = UIButton(type: .system)
    .byTitle("æäº¤")
    .onTap { btn in
        print("âœ… ä½¿ç”¨ UIButton ä¸“å± UIAction å®ç°")
    }
```

#### 2.19ã€å¯¹å¼¹å‡ºæ¡†çš„å°è£…

* [**UIAlertController**](#UIAlertController)

* **`JobsToast`**

  - è‡ªå®šä¹‰æŒç»­åŠ¨ç”»æ—¶é—´

    ```
    JobsToast.show(
        text: "å½“å‰æ§åˆ¶å™¨é”€æ¯æˆåŠŸ",
        config: JobsToast.Config()
            .byBgColor(.systemGreen.withAlphaComponent(0.9))
            .byCornerRadius(12)
            .duration = 2.5       // â¬…ï¸ åœç•™ 2.5s
    )
    ```

  - è‡ªå®šä¹‰å…¥åœºåŠ¨ç”»æ—¶é—´

    ```
    JobsToast.show(
        text: "å·²ä¿å­˜",
        showDuration: 0.30   // â¬…ï¸ å…¥åœºåŠ¨ç”» 0.30sï¼ˆé»˜è®¤ 0.18ï¼‰
    )
    ```

  - è‡ªå®šä¹‰äº‹ä»¶

    ```
    JobsToast.show(
        text: "ç‚¹æˆ‘é‡è¯•",
        tap: { btn in
            print("ç”¨æˆ·ç‚¹å‡»äº† Toast æŒ‰é’®ï¼š\(btn)")
            /// TODO
        }
    )
    ```

#### 2.20ã€å®‰å…¨å–Cell

> é€šè¿‡æ•°ç»„ä¸‹æ ‡å®‰å…¨å–Cellï¼Œå³ä½¿è¶Šç•Œä¹Ÿä¸ä¼šå¥”æºƒï¼ˆåªæ˜¯å»ä¸åˆ°Cellå€¼è¿”å›nilï¼‰

```swift
let cell = collectionView[section: 0, item: 3]
let cell = tableView[section: 0, row: 3]
```

### 3ã€å¯¹æŠ—è®°å¿†è¡°å¼±

* ä½¿ç”¨Xcodeä»£ç å—çš„æ–¹å¼ğŸ‘‰[**`JobsCodeSnippets`**](https://github.com/JobsKits/JobsCodeSnippets)è„šæœ¬å®‰è£…ï¼Œè‡ªåŠ¨æ³¨å…¥ç³»ç»ŸæŒ‡å®šç›®å½•ï¼Œåªéœ€è¦é‡å¯Xcodeå³å¯ä½¿ç”¨

  ![image-20251206164503864](./assets/image-20251206164503864.png)

### 4ã€ä¸€äº›è„šæœ¬åº“[JobsGenesis](https://github.com/JobsKits/JobsGenesis)

> åŸåˆ™ä¸Šæ‹’ç»pythonï¼Œç›´æ¥ç”¨Shellè°ƒç”¨ç³»ç»Ÿåº•å±‚SDKæ¥å®Œæˆï¼ˆé«˜æ•ˆï¼‰

### 5ã€å°†ç»„ä»¶åº“å‘å¸ƒåˆ°[**cocoapods**](https://cocoapods.org/)ï¼ˆæŒç»­æ›´æ–°ï¼‰

```ruby
pod 'JobsSwiftBaseTools'                 # https://github.com/JobsKits/JobsSwiftBaseTools
pod 'JobsSwiftBaseDefines'               # https://github.com/JobsKits/JobsSwiftBaseDefines
pod 'JobsSwiftFoundation@Extensions'     # https://github.com/JobsKits/Jobs.Swift.Foundation.Extensions
pod 'JobsSwiftMetalKit@Extensions'       # https://github.com/JobsKits/Jobs.Swift.MetalKit.Extensions
```

## å››ã€BaseURLæ„æ¶

* ç§»åŠ¨ç«¯Appéœ€è¦é¢„åŸ‹ä¸€ç»„URL
  * æ¯æ¬¡å‘åŒ…çš„æ—¶å€™ï¼Œå¯ä»¥è¿›è¡Œæ›´æ›¿/æ¯æ¬¡å¯åŠ¨ç§»åŠ¨ç«¯Appä¹Ÿå¯ä»¥è¿›è¡Œæ›´æ–°ï¼ˆå…·ä½“çœ‹å…·ä½“ä¸šåŠ¡åœºæ™¯è®¾è®¡ï¼‰
  * è¿™ä¸€ç»„URLçš„è¯·æ±‚ç»“æœâ¤**æ‹¿åˆ°çœŸå®çš„ç§»åŠ¨ç«¯Appè¯·æ±‚çš„BaseURL**
  * è¿™ä¸€ç»„URLå®é™…ä¸Šæ˜¯**æœåŠ¡å™¨çŸ©é˜µ**ï¼ˆä»¥åº”å¯¹IPå°é”ï¼‰
* çœŸå®çš„Appé‡Œé¢å…·ä½“è¯·æ±‚å¯¹åº”çš„BaseURlç¨‹åºå‘˜éƒ½ä¸çŸ¥æ˜¯ä»€ä¹ˆã€‚å‰ç«¯å¼€å‘äººå‘˜åªéœ€è¦é¢å¯¹æ¥å£ï¼Œè€Œä¸éœ€è¦å…³å¿ƒBaseURL
* é‚£ä¹ˆåœ¨ç§»åŠ¨ç«¯Appå¼€å±è¿›å…¥é¡µé¢çš„æ—¶å€™ï¼Œå°±éœ€è¦æœ‰è‡ªæ£€ç¯èŠ‚ï¼ˆå‰ç«¯é…åˆè¿›åº¦æ¡ç­‰UIåé¦ˆï¼‰
  * å…ˆæµ‹è¯•é¢„åŸ‹çš„ä¸€ç»„URLçš„å¯è¾¾æ€§ï¼ˆæœ¬åœ°å¼€å¯è½®è¯¢æµ‹è¯•ï¼‰
  * ç„¶åå†é€šè¿‡è¿™ä¸€ç»„URLæ‹‰å–å®é™…è¯·æ±‚çš„BaseURLï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªç»„ï¼‰
  * è‡ªæ£€ç¯èŠ‚ï¼Œä¹‹å‰äºšåšæ˜¯æ§åˆ¶åœ¨10ï½15ç§’
* å…¨å±€çš„BaseURLæ˜¯æµ®åŠ¨çš„ï¼Œå†…éƒ¨éœ€è¦æœ‰ä¸€ä¸ªå®æ—¶ç›‘æ§æœºåˆ¶ï¼Œå¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­BaseURLå˜çš„ä¸å¯è¾¾ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨è¿™ä¸€ç»„BaseURLå»æ‰¾å¯ç”¨çš„BaseURLé¡¶ä¸Š

<a id="ğŸ”š" href="#ä¸€äº›åŸºæœ¬çš„åŸåˆ™" style="font-size:17px; color:green; font-weight:bold;">æˆ‘æ˜¯æœ‰åº•çº¿çš„ğŸ‘‰ç‚¹æˆ‘å›åˆ°é¦–é¡µ</a>







